/*! For license information please see layerswitcher.ol.min.js.LICENSE.txt */
(()=>{var e={701:e=>{e.exports='\n<div>\n    <select class="m-layerswitcher-groups-fields">\n        <option tabindex="0" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check" value="">\n            {{translations.defaultSelectOption}}</option>\n        {{#each groups}}\n        <option tabindex="0" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"\n            value="{{impl_.olLayer.ol_uid}}">{{legend}}</option>\n        {{/each}}\n    </select>\n</div>\n'},315:e=>{e.exports='<div class="m-layerswitcher-addservices">\n    <div class="m-layerswitcher-search-panel">\n        <div class="input-container">\n            <input tabindex="0" type="text" id="m-layerswitcher-addservices-search-input" placeholder="{{translations.url_service}}" class="m-layerswitcher-input-search" />\n            <span>\n                <button tabindex="0" id="m-layerswitcher-addservices-search-btn" class="m-layerswitcher-icons-zoom m-search-btn" title="{{translations.query}}"></button>\n                <button tabindex="0" id="m-layerswitcher-layerGroup" class="m-layerswitcher-icons-layer-group m-search-btn" title="{{translations.group}}"></button>\n                \x3c!--<button tabindex="0" id="m-layerswitcher-addservices-fileurl-btn" class="m-layerswitcher-icons-doc-text m-search-btn" title="{{translations.query}}"></button>--\x3e\n                {{#if codsiActive}}\n                    <button tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-btn" class="m-layerswitcher-icons-codsi m-search-btn" title="{{translations.codsi_services}}"></button>\n                {{/if}}\n\n                {{#if hasPrecharged}}\n                    <button tabindex="0" role="button" id="m-layerswitcher-addservices-list-btn" class="m-layerswitcher-icons-lista m-search-btn" title="{{translations.loaded_services}}"></button>\n                {{/if}}\n                <label tabindex="0" id="labelFileInput" for="m-layerswitcher-addservices-file-input" class="m-layerswitcher-icons-upload" title="{{translations.upload_file}}"></label>\n                <input tabindex="0" type="file" id="m-layerswitcher-addservices-file-input" accept="{{accept}}" style="display: none;">\n            </span>\n        </div>\n        <div id="m-layerswitcher-ogcCContainer"></div>\n        <div id="m-layerswitcher-layerContainer"></div>\n    </div>\n    <div id="m-layerswitcher-addservices-suggestions" class="m-layerswitcher-addservices-suggestions">\n        <table>\n            {{#if precharged}}\n            <thead>\n                <tr>\n                    <th tabindex="0">{{translations.availables}}</th>\n                </tr>\n            </thead>\n            {{/if}}\n            <tbody>\n                {{#each precharged.groups}}\n                    <tr>\n                        <td>\n                            <button tabindex="0" role="button" class="m-layerswitcher-suggestion-caret">{{name}}</button>\n                            <ul class="m-layerswitcher-suggestion-group">\n                                {{#each services}}\n                                    <li><button tabindex="0" class="m-layerswitcher-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</button></li>\n                                {{/each}}\n                            </ul>\n                        </td>\n                    </tr>\n                {{/each}}\n                {{#each precharged.services}}\n                    <tr>\n                        <td><button tabindex="0" class="m-layerswitcher-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</button></td>\n                    </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n\n    <div id="m-layerswitcher-addservices-codsi" style="display: none;">\n        <p><a tabindex="0" href="https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home" target="_blank">{{translations.codsi_services}}</a></p>\n        <div class="m-layerswitcher-addservices-codsi-search-panel">\n            <input tabindex="0" type="text" id="m-layerswitcher-addservices-codsi-search-input" placeholder="{{translations.filter_text}}" class="m-input-search" />\n            <span tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-filter-btn" class="m-layerswitcher-icons-zoom m-filter-btn" title="{{translations.filter_results}}"></span>\n            <span tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-clean-btn" class="m-layerswitcher-icons-papelera m-clean-btn" title="{{translations.clean_filter}}"></span>\n        </div>\n        <div>\n            <table>\n                <tbody id="m-layerswitcher-addservices-codsi-results"></tbody>\n            </table>\n        </div>\n        <div id="m-layerswitcher-addservices-codsi-pagination">\n        </div>\n    </div>\n    <div id="m-layerswitcher-addservices-results"></div>\n</div>'},803:e=>{e.exports='<div>\n    <div class="m-layerswitcher-service-capabilities">\n        <section id="m-layerswitcher-groups-fields" class="m-layerswitcher-groups-fields-container"></section>\n        {{#if showgeneral}}\n            <p tabindex="0" class="m-layerswitcher-show-capabilities"><button tabindex="0" class="m-layerswitcher-icons-desplegar"></button>&nbsp;{{translations.show_service_info}} {{type}}</p>\n            <div class="m-layerswitcher-capabilities-container">\n                {{#if serviceCapabilities.title}}\n                    <p><span tabindex="0">{{translations.title}}:</span></p>\n                {{/if}}\n                {{#if serviceCapabilities.title}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.title}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.abstract}}\n                    <p>\n                        <span tabindex="0">{{translations.abstract}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.abstract}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.abstract}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.contact}}\n                    <p>\n                        <span tabindex="0">{{translations.responsible}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.contact}}\n                    <div tabindex="0">\n                        {{{serviceCapabilities.contact}}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.accessConstraints}}\n                    <p>\n                        <span tabindex="0">{{translations.access_constraints}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.accessConstraints}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.accessConstraints}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n        {{#if isWFS}}\n            <p tabindex="0" class="m-layerswitcher-show-capabilities-wfs"><button tabindex="0" class="m-layerswitcher-icons-desplegar"></button>&nbsp;{{translations.show_service_info}} WFS</p>\n            <div class="m-layerswitcher-capabilities-container-wfs">\n                {{#if serviceCapabilitieswfs.title}}\n                    <p><span tabindex="0">{{translations.title}}:</span></p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.title}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.title}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.abstract}}\n                    <p>\n                        <span tabindex="0">{{translations.abstract}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.abstract}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.abstract}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.contact}}\n                    <p>\n                        <span tabindex="0">{{translations.responsible}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.contact}}\n                    <div tabindex="0">\n                        {{{serviceCapabilitieswfs.contact}}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.accessConstraints}}\n                    <p>\n                        <span tabindex="0">{{translations.access_constraints}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.accessConstraints}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.accessConstraints}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-table-results">\n        <div class="m-layerswitcher-table-container">\n            {{#if showgeneral}}\n                <table id="m-layerswitcher-all">\n                    <thead>\n                        <tr tabindex="0">\n                            <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                            <th>{{translations.layers}} {{type}}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{#each result}}\n                            <tr tabindex="0">\n                                <td><span role="button" aria-label="{{translations.add_service}}" tabindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{legend}}</td>\n                            </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            {{/if}}\n            {{#if isWFS}}\n                <table id="m-layerswitcher-wfs">\n                    <thead>\n                        <tr tabindex="0">\n                            <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall-wfs" class="m-layerswitcher-icons-check"></button></th>\n                            <th>{{translations.layers}} WFS</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{#each layersWFS}}\n                            <tr tabindex="0">\n                                <td><span role="button" aria-label="{{translations.add_service}}" format="{{formats.[0]}}" tabindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices-wfs m-layerswitcher-icons-check"></span></td>\n                                <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{title}}">{{title}}</td>\n                            </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            {{/if}}\n        </div>\n        <div class="button">\n            <button tabindex="0" type="button" class="m-layerswitcher-addservices-add m-layerswitcher-common-btn">{{translations.add}}</button>\n        </div>\n    </div>\n</div>'},346:e=>{e.exports='<div id="m-layer-change-name" class="m-layerswitcher-change-name">\n    <p><input tabindex="{{order}}" type="text" maxlength="200" value="{{name}}" /></p>\n    <button>{{translations.change}}</button>\n</div>\n'},957:e=>{e.exports='<div id="m-layerswitcher-style">\n    <div tabindex="0" class="m-layerswitcher-style-container">\n        <select tabindex="0" id="m-layerswitcher-style-select">\n            <option disabled="disabled" value="">{{translations.select_style}}</option>\n            {{#if isVectorLayer}}\n                {{#each styles}}\n                    {{#if this.options_.name}}\n                        <option value="{{@index}}">{{this.options_.name}}</option>\n                    {{else}}\n                        {{#eq @index 0}}\n                            <option value="{{@index}}">{{../translations.default_style}} </option>\n                        {{/eq}}\n                        {{#gt @index 0}}\n                            <option value="{{@index}}">{{../translations.style}} {{@index}}\n                        {{/gt}}\n                    {{/if}}\n\n                {{/each}}\n            {{else}}\n                {{#each styles}}\n                    <option value="{{Name}}">{{Title}}</option>\n                {{/each}}\n            {{/if}}\n        </select>\n    </div>\n    <div class="m-layerswitcher-style-btn-container">\n        <button tabindex="0" class="m-layerswitcher-style-common-btn">{{translations.change}}</button>\n    </div>\n</div>'},493:e=>{e.exports='<form>\n    <div id="m-layerswitcher-ogc-search-formothers">\n        <div role="text" tabindex="0" class="m-layerswitcher-ogc-warning-msg m-layerswitcher-ogc-warning-msg-custom-query ">{{translations.custom_query_warning}}</div>\n        {{#each filtersList}}\n            {{#if this.title}}\n                {{#if this.bool}}\n                    <div class="m-layerswitcher-ogc-form-input">\n                        <div class="m-layerswitcher-ogc-more-width">\n                            <label tabindex="0" for="search-form-{{this.title}}">{{this.title}}</label>\n                        </div>\n                        <div class="m-layerswitcher-ogc-less-width">\n                            {{#if this.value}}\n                                {{#eq this.value "true"}}\n                                    <div><input tabindex="0" aria-label="true" type="checkbox" id="search-form-{{this.title}}" value="true" {{#eq this.value "true"}}checked{{/eq}}>true</div>\n                                    <div><input tabindex="0" aria-label="false" type="checkbox" id="search-form-{{this.title}}" value="false" {{#eq this.value "false"}}checked{{/eq}}>false</div>\n                                {{/eq}}\n                            {{else}}\n                                <div><input tabindex="0" aria-label="true"  type="checkbox" id="search-form-{{this.title}}" value="true">true</div>\n                                <div><input tabindex="0" aria-label="false" type="checkbox" id="search-form-{{this.title}}" value="false">false</div>\n                            {{/if}}\n                        </div>\n                        <br />\n                    </div>\n                {{else if this.date}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input">\n                            <label tabindex="0" for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label>\n                            <input tabindex="0" class="search-form-date" type="date" id="search-form-{{this.title}}" value="{{this.value}}">\n                            <br />\n                        </div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-date" type="date" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else if this.number}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-number" type="number" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-number" type="number" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input type="text" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input type="text" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        {{/each}}\n\n    </div>\n</form>'},364:e=>{e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n        <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n\n        <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.abstract}}:</span></p>\n        <div tabindex="0">\n            {{abstract}}\n        </div>\n        {{#if provider}}\n            <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.provider}}:</span></p>\n        {{/if}}\n        {{#if provider}}\n            <div tabindex="0">\n                {{{provider}}}\n            </div>\n        {{/if}}\n        {{#if hasMetadata }}\n            <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.metadata}}:</span></p>\n        {{/if}}\n        {{#if metadata}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n        {{/if}}\n        {{#if metadata_service}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata_service}}">{{translations.see_more_service}}</a></p>\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-btn-container">\n        {{#if capabilities}}\n            <a tabindex="0" class="m-layerswitcher-common-btn" href="{{capabilities}}" target="_blank">{{translations.service_info}}</a>\n        {{/if}}\n        {{#if downloadCenter}}\n            <a tabindex="0" class="m-layerswitcher-common-btn" href="{{downloadCenter}}" target="_blank">{{translations.download_center}}</a>\n        {{/if}}\n    </div>\n</div>'},833:e=>{e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n\n        <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.abstract}}:</span></p>\n        <div tabindex="0">\n            {{abstract}}\n        </div>\n        {{#if metadata}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n        {{/if}}\n        {{#gt attributes.length 0 }}\n            <div id="m-layerswitcher-tfoot">\n                <p tabindex="0"><span>{{translations.attributes}}:</span>&nbsp;</p>\n                <div class="m-layerswitcher-pagecontrolscontainer">\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-izquierda m-layerswitcher-hidden" id="m-layerswitcher-previous" aria-label="{{translations.previous}}"></span>\n                    </div>\n                    <span tabindex="0" id="m-layerswitcher-pageinfo">Página {{pages.actual}} de {{pages.total}}</span>\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-derecha m-layerswitcher-hidden" id="m-layerswitcher-next" aria-label="{{translations.next}}"></span>\n                    </div>\n                </div>\n            </div>\n            <table id="m-layerswitcher-table" class="m-layerswitcher-tablepagination">\n                <thead>\n                    <tr>\n                        {{#each headerAtt}}\n                            <td tabindex="0">{{this}}</td>\n                        {{/each}}\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#each attributes}}\n                        <tr>\n                            {{#each this.properties}}\n                                <td tabindex="0"> {{{this}}}</td>\n                            {{/each}}\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        {{/gt}}\n    </div>\n</div>'},601:e=>{e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n        <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n        {{#if numberFeatures}}\n            <p tabindex="0"><span>{{translations.n_obj_geo}}:</span>&nbsp; {{numberFeatures}}</p>\n        {{/if}}\n        {{#if extension}}\n            <p tabindex="0"><span>{{translations.extension}}:</span>&nbsp; [{{extension}}]</p>\n        {{/if}}\n        {{#if others.id}}\n            <p tabindex="0"><span>ID:</span>&nbsp; {{others.id}}</p>\n        {{/if}}\n        {{#if others.attribution}}\n            <p tabindex="0"><span>{{translations.attribution}}:</span>&nbsp; {{others.attribution}}</p>\n        {{/if}}\n        {{#if others.description}}\n            <p tabindex="0"><span>{{translations.description}}:</span>&nbsp; {{others.description}}</p>\n        {{/if}}\n        {{#if others.minzoom}}\n            <p tabindex="0"><span>{{translations.minzoom}}:</span>&nbsp; {{others.minzoom}}</p>\n        {{/if}}\n        {{#if others.maxzoom}}\n            <p tabindex="0"><span>{{translations.maxzoom}}:</span>&nbsp; {{others.maxzoom}}</p>\n        {{/if}}\n        {{#if others.center}}\n            <p tabindex="0"><span>{{translations.center}}:</span>&nbsp; [{{others.center}}]</p>\n        {{/if}}\n        {{#gt attributes.length 0 }}\n            <div id="m-layerswitcher-tfoot">\n                <p tabindex="0"><span>{{translations.attributes}}:</span>&nbsp;</p>\n                <div class="m-layerswitcher-pagecontrolscontainer">\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-izquierda m-layerswitcher-hidden" id="m-layerswitcher-previous" aria-label="{{translations.previous}}"></span>\n                    </div>\n                    <span id="m-layerswitcher-pageinfo">Página {{pages.actual}} de {{pages.total}}</span>\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-derecha m-layerswitcher-hidden" id="m-layerswitcher-next" aria-label="{{translations.next}}"></span>\n                    </div>\n                </div>\n            </div>\n            <table id="m-layerswitcher-table" class="m-layerswitcher-tablepagination">\n                <thead>\n                    <tr>\n                        {{#each headerAtt}}\n                            <td tabindex="0">{{this}}</td>\n                        {{/each}}\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#each attributes}}\n                        <tr>\n                            {{#each this.properties}}\n                                <td tabindex="0"> {{{this}}}</td>\n                            {{/each}}\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        {{/gt}}\n    </div>\n</div>'},55:e=>{e.exports='<li class="m-layerswitcher-sectionPanel m-layerswitcher-sectionPanel-colorPanel" data-layer-id="{{idLayer}}" data-layer-name="{{id}}" data-layer-type="{{type}}" data-layer-url="{{url}}" data-order="{{dataOrder}}">\n    <section class="m-layerswitcher-sectionPanel-header">\n        <div>\n            {{#if isEyes}}\n            <button title="{{#if visible}}{{translations.hide_service}}{{^}}{{translations.show_service}}{{/if}}"\n                aria-label="{{#if visible}}{{translations.hide_service}}{{^}}{{translations.show_service}}{{/if}}"\n                tabindex="0"\n                data-select-type="eye"\n                data-layer-id="{{idLayer}}"\n                class="m-layerswitcher-visible-control-button m-layerswitcher-check {{#if visible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}} {{#if outOfRange}}m-layerswitcher-outOfRange{{/if}}">\n            </button>\n            {{/if}}\n            {{#if isRadio}}\n            <input\n                aria-label="{{#if visible}}{{translations.hide_service}}{{^}}{{translations.show_service}}{{/if}}"\n                tabindex="0"\n                {{#eq checkedLayer "true" }}checked{{/eq}}\n                type="radio"\n                data-layer-id="{{idLayer}}"\n                data-select-type="radio"\n                class="m-layerswitcher-check {{#if outOfRange}}m-layerswitcher-outOfRange-input{{/if}}"\n                name="{{nameRadio}}"\n                value="{{type}}-{{id}}">\n            {{/if}}\n\n            <p tabindex="0"\n            class="m-layerswitcher-sectionPanel-header-text"\n            data-layer-id="{{idLayer}}"\n            data-layer-type="{{type}}"\n            data-layer-name="{{id}}"\n            title="{{changeName}}"\n            data-layer-url="{{url}}">\n                <span {{#if displayLabel}}style="display: none" {{/if}} aria-label="Tipo de servicio {{type}}"\n                    tabindex="0" class="m-layerswitcher-type">{{type}}</span>\n                {{title}}\n            </p>\n        </div>\n\n        <div class="m-layerswitcher-sectionPanel-header-tools">\n            <button\n            class="{{#if displayGroup}}m-layerswitcher-icons-colapsar{{else}}m-layerswitcher-icons-desplegar{{/if}}  m-layerswitcher-groupDisplay"\n            data-layer-id="{{idLayer}}"\n            title="{{#if displayGroup}} {{hide_group}} {{else}} {{show_group}} {{/if}}"\n            aria-label="{{#if displayGroup}} {{hide_group}} {{else}} {{show_group}} {{/if}}"\n            ></button>\n            {{#if isDelete}}\n            <button\n                data-layer-id="{{idLayer}}"\n                title="{{translations.remove_layer}}"\n                tabindex="0"\n                aria-label="{{translations.remove_layer}}"\n                class="m-layerswitcher-icons-delete">\n            </button>\n            {{/if}}\n        </div>\n    </section>\n    <ul style="display: {{#if displayGroup}}block{{else}}none{{/if}}" tabindex="0" class="m-layerswitcher-ullayersGroup nested-sortable" data-layer-name="{{id}}" data-layer-id="{{idLayer}}"></ul>\n</li>'},356:e=>{e.exports='<li tabindex="0" class="m-layerswitcher-sectionPanel m-layerswitcher-sectionPanel-group" aria-label="{{translations.layers}}" data-layer-id="{{idLayer}}" data-layer-name="{{id}}" data-layer-type="{{type}}" data-layer-url="{{url}}" data-order="{{dataOrder}}">\n    <div class="m-layerswitcher-title-layer">\n        {{#if isEyes}}\n            <div class="m-layerswitcher-visible-control">\n                <button \n                    title="{{#if visible}}{{translations.hide_service}}{{^}}{{translations.show_service}}{{/if}}" \n                    aria-label="{{#if visible}}{{translations.hide_service}}{{^}}{{translations.show_service}}{{/if}}" \n                    tabindex="0" \n                    data-select-type="eye" \n                    data-layer-id="{{idLayer}}"\n                    class="m-layerswitcher-check {{#if visible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}} {{#if outOfRange}}m-layerswitcher-outOfRange{{/if}}">\n                </button>\n            </div>\n        {{/if}}\n        {{#if isRadio}}\n            <div class="m-layerswitcher-visible-control m-layerswitcher-radio">\n                <input \n                aria-label="{{#if visible}}{{translations.hide_service}}{{^}}{{translations.show_service}}{{/if}}" \n                tabindex="0" {{#eq checkedLayer "true"}}checked{{/eq}} \n                type="radio" \n                data-layer-id="{{idLayer}}"\n                data-select-type="radio" \n                class="m-layerswitcher-check {{#if outOfRange}}m-layerswitcher-outOfRange-input{{/if}}" \n                value="{{type}}-{{id}}"\n                name="{{nameRadio}}"\n                >\n            </div>\n        {{/if}}\n        <div class="m-layerswitcher-visible-typeContent">\n            <table>\n                <tbody>\n                    <tr>\n                        <td><span {{#if displayLabel}}style="display: none"{{/if}} aria-label="Tipo de servicio {{type}}" tabindex="0" class="m-layerswitcher-type">{{type}}</span></td>\n                        <td><span tabindex="0"  data-layer-id="{{idLayer}}" data-layer-type="{{type}}" title="{{translations.changeName}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-title-box">{{title}}</span></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        {{#if isDelete}}\n            <button \n               title="{{translations.remove_layer}}" \n               data-layer-id="{{idLayer}}"\n               tabindex="0" \n               aria-label="{{translations.remove_layer}}" \n               class="m-layerswitcher-icons-delete">\n            </button>\n        {{/if}}\n    </div>\n    {{#if visible}}\n        <div class="m-layerswitcher-tools">\n            {{#if isTransparency}}\n                <div class="m-layerswitcher-opacity">\n                    <input tabindex="0" type="range" data-layer-id="{{idLayer}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-transparency" min="0" max="1" step="0.1" value="{{opacity}}" {{#unless visible}} disabled {{/unless}} {{#if outOfRange}} disabled {{/if}} />\n                </div>\n            {{/if}}\n            <div class="m-layerswitcher-action-tools">\n                {{#if isLegend}}\n                    <button \n                        tabindex="0" \n                        title="{{translations.show_hide}}" \n                        data-layer-id="{{idLayer}}"\n                        class="m-layerswitcher-icons-image">\n                    </button>\n                {{/if}}\n                {{#if isZoom}}\n                    <button \n                        tabindex="0" \n                        title="{{translations.zoom}}" \n                        data-layer-id="{{idLayer}}" \n                        class="m-layerswitcher-icons-target">\n                    </button>\n                {{/if}}\n                {{#if isInformation}}\n                    <button \n                        tabindex="0" \n                        title="{{translations.info_metadata}}" \n                        data-layer-id="{{idLayer}}" \n                        class="m-layerswitcher-icons-info">\n                    </button>\n                {{/if}}\n                {{#if isStyle}}\n                    {{#if hasStyles}}\n                        <button \n                            tabindex="0" \n                            title="{{translations.change_style}}" \n                            data-layer-id="{{idLayer}}" \n                            class="m-layerswitcher-icons-style">\n                        </button>\n                    {{/if}}\n                {{/if}}\n            </div>\n        </div>\n        <div class="m-layerswitcher-legend">\n            <img></img>\n        </div>\n    {{/if}}\n</li>'},876:e=>{e.exports='<div id="m-layerswitcher-layerContainer">\n    <section id="m-layerswitcher-groups-fields" class="m-layerswitcher-groups-fields-container"></section>\n    {{#eq type \'geojson\'}}\n        <p>{{translations.data_layer}} GeoJSON</p>\n    {{/eq}}\n    {{#eq type \'osm\'}}\n        <p>{{translations.data_layer}} OSM</p>\n    {{/eq}}\n    {{#eq type \'tms\'}}\n        <p>{{translations.data_layer}} TMS</p>\n    {{/eq}}\n    {{#eq type \'xyz\'}}\n        <p>{{translations.data_layer}} XYZ</p>\n    {{/eq}}\n    {{#eq type \'mvt\'}}\n        <p>{{translations.data_layer}} MVT</p>\n        {{#gt layers.length 0}}\n            <div id="m-layerswitcher-addservices-results">\n                <div class="m-layerswitcher-table-results">\n                    <div class="m-layerswitcher-table-container">\n                        <table id="m-layerswitcher-all">\n                            <thead>\n                                <tr>\n                                    <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                                    <th>{{translations.layers}}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {{#each layers}}\n                                    <tr tabindex="0">\n                                        <td><span tabindex="0" aria-label="{{translations.add_service}}" role="button" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                        <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{name}}</td>\n                                    </tr>\n                                {{/each}}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        {{/gt}}\n    {{/eq}}\n    {{#eq type \'kml\'}}\n        <p>{{translations.data_layer}} KML</p>\n        {{#gt layers.length 0}}\n            <div id="m-layerswitcher-addservices-results">\n                <div class="m-layerswitcher-table-results">\n                    <div class="m-layerswitcher-table-container">\n                        <table id="m-layerswitcher-all">\n                            <thead>\n                                <tr tabindex="0">\n                                    <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                                    <th>{{translations.layers}}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {{#each layers}}\n                                    <tr tabindex="0">\n                                        <td><span aria-label="{{translations.add_service}}" role="button" abindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                        <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{name}}</td>\n                                    </tr>\n                                {{/each}}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        {{/gt}}\n    {{/eq}}\n    <div class="m-layerswitcher-layer-fields">\n        {{#if isMVT}}\n            {{#eq layers.length 0}}\n                <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-name">{{translations.name}}</label>\n                <input tabindex="0" type="text" id="m-layerswitcher-layer-name" placeholder="{{translations.separatedby}}" />\n            {{/eq}}\n        {{/if}}    \n    </div>\n    <div class="m-layerswitcher-layer-fields">\n        <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-legend">{{translations.legend}}</label>\n        <input tabindex="0" type="text" id="m-layerswitcher-layer-legend" placeholder="{{translations.placeHolderLegend}}"/>\n    </div>\n    {{#eq type \'osm\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'mvt\'}}\n        \x3c!--<div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>--\x3e\n    {{/eq}}\n    <div class="button">\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-layer-button"> {{translations.add_btn}}</button>\n    </div>\n</div>'},582:e=>{e.exports='<main class="m-control m-layerswitcher-container">\n        <header id="m-layerswitcher-title" class="m-layerswitcher-title">\n            <h1 aria-label="Plugin layerswitcher" tabindex="0" role="text">{{translations.layers}}</h1>\n            <button {{#if isAddLayers}}style="display: none"{{/if}} tabindex="0" id="m-layerswitcher-addlayers" title="{{translations.add_service}}"\n                class="m-layerswitcher-addservice">{{translations.add}}</button>\n        </header>\n    <section tabindex="0" aria-label="Plugin layerswitcher" id="m-layerswitcher-content" class="m-layerswitcher-content"></section>\n</main>'},106:e=>{e.exports='{{#*inline "layerswitcherLayer"}}\n    {{#each layers}}\n        <li tabindex="0" class="m-layerswitcher-sectionPanel" aria-label="{{translations.layers}}" data-layer-name="{{id}}" data-layer-type="{{type}}" data-layer-url="{{url}}" data-order="{{dataOrder}}" data-layer-id="{{idLayer}}">\n            <div class="m-layerswitcher-title-layer">\n                {{#if ../isEyes}}\n                    <div class="m-layerswitcher-visible-control">\n                        <button \n                            title="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" \n                            aria-label="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" \n                            tabindex="0" \n                            data-select-type="eye" \n                            data-layer-id="{{idLayer}}"\n                            class="m-layerswitcher-check {{#if visible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}} {{#if outOfRange}}m-layerswitcher-outOfRange{{/if}}">\n                        </button>\n                    </div>\n                {{/if}}\n                {{#if ../isRadio}}\n                    <div class="m-layerswitcher-visible-control m-layerswitcher-radio">\n                        <input \n                            aria-label="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" \n                            tabindex="0" \n                            {{#eq checkedLayer "true"}}checked{{/eq}} \n                            type="radio" \n                            data-layer-id="{{idLayer}}"\n                            data-select-type="radio" \n                            class="m-layerswitcher-check {{#if outOfRange}}m-layerswitcher-outOfRange-input{{/if}}" \n                            name="m-layerswitcher-radioLayers" \n                            value="{{type}}-{{id}}">\n                    </div>\n                {{/if}}\n                <div class="m-layerswitcher-visible-typeContent">\n                    <table>\n                        <tbody>\n                            <tr>\n                                <td><span {{#if ../displayLabel}}style="display: none"{{/if}} aria-label="Tipo de servicio {{type}}" tabindex="0" class="m-layerswitcher-type">{{type}}</span></td>\n                                <td><span \n                                        data-layer-id="{{idLayer}}"  \n                                        title="{{../translations.changeName}}" \n                                        tabindex="0" \n                                        class="m-layerswitcher-title-box">\n                                        {{title}}\n                                    </span>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                {{#if ../isDelete}}\n                    <button \n                        title="{{../translations.remove_layer}}" \n                        data-layer-id="{{idLayer}}"\n                        tabindex="0" \n                        aria-label="{{translations.remove_layer}}" \n                        class="m-layerswitcher-icons-delete">\n                    </button>\n                {{/if}}\n            </div>\n            {{#if visible}}\n                <div class="m-layerswitcher-tools">\n                    {{#if ../isTransparency}}\n                        <div class="m-layerswitcher-opacity">\n                            <input tabindex="0" type="range" data-layer-id="{{idLayer}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-transparency" min="0" max="1" step="0.1" value="{{opacity}}" {{#unless visible}} disabled {{/unless}} {{#if outOfRange}} disabled {{/if}} />\n                        </div>\n                    {{/if}}\n                    <div class="m-layerswitcher-action-tools">\n                        {{#if ../isLegend}}\n                            <button tabindex="0" \n                                title="{{../translations.show_hide}}" \n                                data-layer-id="{{idLayer}}"\n                                class="m-layerswitcher-icons-image">\n                            </button>\n                        {{/if}}\n                        {{#if ../isZoom}}\n                            <button \n                                tabindex="0" \n                                title="{{../translations.zoom}}" \n                                data-layer-id="{{idLayer}}" \n                                class="m-layerswitcher-icons-target">\n                            </button>\n                        {{/if}}\n                        {{#if ../isInformation}}\n                            <button \n                                tabindex="0" \n                                title="{{../translations.info_metadata}}" \n                                data-layer-id="{{idLayer}}"\n                                class="m-layerswitcher-icons-info">\n                            </button>\n                        {{/if}}\n                        {{#if ../isStyle}}\n                            {{#if hasStyles}}\n                                <button tabindex="0" \n                                title="{{../translations.change_style}}" \n                                data-layer-id="{{idLayer}}" \n                                class="m-layerswitcher-icons-style">\n                            </button>\n                            {{/if}}\n                        {{/if}}\n                    </div>\n                </div>\n                <div class="m-layerswitcher-legend">\n                    <img></img>\n                </div>\n            {{/if}}\n        </li>\n    {{/each}}\n    {{/inline}}\n    <div class="nested-sortable m-layerswitcher-containerLayers">\n            {{#if isEyes}}\n                <button {{#if isStatusLayers}}style="display: none"{{/if}} title="{{#if allVisible}}{{translations.show_all_services}}{{^}}{{translations.hide_all_services}}{{/if}}" aria-label="{{#if allVisible}}{{translations.show_all_services}}{{^}}{{translations.hide_all_services}}{{/if}}" tabindex="0" id="m-layerswitcher-hsalllayers" class="m-layerswitcher-allstatus {{#if allVisible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}}"></button>\n            {{/if}}\n            <ul class="m-layerswitcher-ullayers nested-sortable">\n                {{> layerswitcherLayer layers=overlayLayers}}\n            </ul>\n    </div>'},431:(e,t,i)=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">layerswitcher <img style="vertical-align: bottom; filter: invert(100%);" src="'+i(914)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/layerswitcher_0.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help3}}</p>\n      <p>{{translations.help4}}</p>\n      <img src="{{urlImages}}/layerswitcher_1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}/layerswitcher_2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}</p>\n      <img src="{{urlImages}}/layerswitcher_3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help7}}</p>\n      <img src="{{urlImages}}/layerswitcher_4.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help8}}</p>\n      <img src="{{urlImages}}/layerswitcher_5.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help9}}</p>\n      <img src="{{urlImages}}/layerswitcher_6.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help10}}: <a tabindex="0" href="https://github.com/Desarrollos-IDEE/API-IDEE/tree/master/api-idee-js/src/plugins/layerswitcher" target="_blank">https://github.com/Desarrollos-IDEE/API-IDEE/tree/master/api-idee-js/src/plugins/layerswitcher</a></p>\n      <img src="{{urlImages}}/layerswitcher_7.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help11}}</p>\n      <p>{{translations.help12}}</p>\n      <img src="{{urlImages}}/layerswitcher_8.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help13}}</p>\n      <img src="{{urlImages}}/layerswitcher_9.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help14}}</p>\n      <img src="{{urlImages}}/layerswitcher_10.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help15}}</p>\n      <img src="{{urlImages}}/layerswitcher_11.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help16}}</p>\n      <img src="{{urlImages}}/layerswitcher_12.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help17}}</p>\n      <img src="{{urlImages}}/layerswitcher_13.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help18}}</p>\n      <img src="{{urlImages}}/layerswitcher_14.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help19}}: <a tabindex="0" href="https://github.com/Desarrollos-IDEE/API-IDEE/tree/master/api-idee-js/src/plugins/layerswitcher" target="_blank">https://github.com/Desarrollos-IDEE/API-IDEE/tree/master/api-idee-js/src/plugins/layerswitcher</a></p>\n      <p>{{translations.help20}}: <a tabindex="0" href="https://componentes-desarrollo.idee.es/api-idee/layerswitcher.jsp?language=es" target="_blank">https://componentes.idee.es/api-idee/layerswitcher.jsp?language=es</a></p>\n   </div>\n</div>\n'},199:e=>{e.exports='<div id="m-layerswitcher-ogcCContainer">\n    <section id="m-layerswitcher-groups-fields" class="m-layerswitcher-groups-fields-container"></section>\n    <div>\n        <select tabindex="0" id="m-layerswitcher-ogc-vectors-select">\n            <option disabled="disabled" value="">{{translations.select_service}}</option>\n            {{#each layers}}\n                {{#if ../selectedLayer}}\n                    {{#lt @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                    {{/lt}}\n                    {{#gt @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                    {{/gt}}\n                    {{#eq @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}" selected>{{this.title}}</option>\n                    {{/eq}}\n                {{else}}\n                    <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                {{/if}}\n            {{/each}}\n        </select>\n    </div>\n    <div class="btn-container"><br>\n        <fieldset tabindex="0" class="m-layerswitcher-ogc-fieldset-customquery">\n            <legend>{{translations.filters}}</legend>\n            <label class="m-layerswitcher-ogc-label-customquery">\n                <input tabindex="0" type="radio" name="m-layerswitcher-ogc-filter" value="id" class="m-layerswitcher-ogc-input-customquery" id="m-layerswitcher-ogc-filter-id-input" {{#unless filterByOtherFilters}}checked{{/unless}}>\n                &nbsp;{{translations.id_filter}}\n            </label>\n            <br><br>\n            <label class="m-layerswitcher-ogc-label-customquery">\n                <input tabindex="0" type="radio" name="m-layerswitcher-ogc-filter" value="others" class="m-layerswitcher-ogc-input-customquery" {{#if filterByOtherFilters}}checked{{/if}}>\n                &nbsp;{{translations.other_filters}}\n            </label>\n            <br><br>\n            {{#unless filterByOtherFilters}}\n                <fieldset tabindex="0" id="m-layerswitcher-ogc-filter-id" style="display:block;" class="m-layerswitcher-ogc-filter-custom-query">\n            {{else}}\n                <fieldset tabindex="0" id="m-layerswitcher-ogc-filter-id" style="display:none;" class="m-layerswitcher-ogc-filter-custom-query">\n            {{/unless}}\n            <div id="m-layerswitcher-ogc-search-form-id">\n                <div id="m-layerswitcher-ogc-form-input"><label tabindex="0" for="m-layerswitcher-ogc-search-form-ID" class="m-layerswitcher-ogc-search-form-id">ID</label><input type="text" class="m-layerswitcher-ogc-search-form-ID" id="m-layerswitcher-ogc-search-form-ID" value="{{this.prevID}}"><br /></div>\n            </div>\n        </fieldset>\n\n\n        {{#if filterByOtherFilters}}\n            <fieldset tabindex="0" id="m-layerswitcher-ogc-other-filters" style="display:block;" class="m-layerswitcher-ogc-filter-custom-query">\n        {{else}}\n            <fieldset tabindex="0" id="m-layerswitcher-ogc-other-filters" style="display:none;" class="m-layerswitcher-ogc-filter-custom-query">\n        {{/if}}\n        <div id="m-layerswitcher-ogc-search-formothers">\n            <div tabindex="0"><label>{{translations.amount_results}} </label><input tabindex="0" type="text" id="m-layerswitcher-ogc-limit-items" value="{{#if limit}}{{limit}}{{else}}10{{/if}}" step="1" class="fieldset-limit"><label>{{translations.amount_results_2}} </label></div><br>\n            <div><label class="fieldset-bbox" tabindex="0">{{translations.bbox_select}}<input tabindex="0" type="checkbox" id="m-layerswitcher-ogc-search-bbox" {{#if bbox}}checked{{/if}}></label>\n            </div><br>\n            {{#if summary}}\n                <div id="m-layerswitcher-ogc-summary">\n                    {{#if filterByOtherFilters}}\n                        <div>{{translations.other_filters}}\n                    {{/if}}\n                    <ul>\n                        {{#each summary}}\n                            <li>{{@key}} = {{this}}</li>\n                        {{/each}}\n                    </ul>\n                </div>\n                <br>\n        </div>\n\n        {{/if}}\n\n        <div tabindex="0" class="m-layerswitcher-ogc-warning-msg">{{translations.warning}}</div></br>\n        <button class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-custom-query-button"> {{translations.custom_query_btn}}</button>\n    </div>\n    </fieldset>\n    </fieldset>\n    <p tabindex="0" id="m-layerswitcher-ogc-check-results" style="display: none;"></p>\n    <div class="m-layerswithcer-ogc-buttons">\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-select-button"> {{translations.add_btn}}</button>\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-check-button" style="margin-right: 0;"> {{translations.check_results}}</button>\n    </div>\n</div>\n</div>'},914:e=>{"use strict";e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik03Ny44MjQgMzE4LjQ2NGw0MjEuODg4IDIyNS4yOGM0LjA5NiAyLjA0OCA5LjIxNiAzLjA3MiAxMy4zMTIgMy4wNzJzOS4yMTYtMS4wMjQgMTMuMzEyLTMuMDcybDQyMC44NjQtMjI1LjI4YzkuMjE2LTUuMTIgMTQuMzM2LTE1LjM2IDE0LjMzNi0yNS42cy01LjEyLTE5LjQ1Ni0xNC4zMzYtMjQuNTc2bC00MjAuODY0LTIyNS4yOGMtOC4xOTItNC4wOTYtMTguNDMyLTQuMDk2LTI2LjYyNCAwbC00MjEuODg4IDIyNS4yOGMtOC4xOTIgNS4xMi0xNC4zMzYgMTQuMzM2LTE0LjMzNiAyNC41NzZzNi4xNDQgMjAuNDggMTQuMzM2IDI1LjZ6TTUxMy4wMjQgMTE2LjczNmwzNDAuOTkyIDE3Ni4xMjgtMzQwLjk5MiAxNzIuMDMyLTM0Mi4wMTYtMTcyLjAzMiAzNDIuMDE2LTE3Ni4xMjh6TTk0Ny4yIDQ5NC41OTJsLTEyMi44OC02Ni41NmMtMTMuMzEyLTcuMTY4LTQxLjk4NC0zLjA3Mi00OS4xNTIgMTAuMjQtNy4xNjggMTQuMzM2LTUuMTIgMzguOTEyIDguMTkyIDQ2LjA4MGw2Mi40NjQgMzQuODE2LTMzMi44IDE2NC44NjQtMzMzLjgyNC0xNjQuODY0IDYzLjQ4OC0zNC44MTZjMTMuMzEyLTcuMTY4IDEzLjMxMi0zMS43NDQgNi4xNDQtNDUuMDU2LTguMTkyLTE0LjMzNi0zMy43OTItMTkuNDU2LTQ3LjEwNC0xMi4yODhsLTEyMy45MDQgNjcuNTg0Yy04LjE5MiA1LjEyLTE0LjMzNiAxNC4zMzYtMTQuMzM2IDI0LjU3NnM1LjEyIDIwLjQ4IDE0LjMzNiAyNC41NzZsNDIxLjg4OCAyMjUuMjhjNC4wOTYgMi4wNDggOS4yMTYgMy4wNzIgMTMuMzEyIDMuMDcyczkuMjE2LTEuMDI0IDEzLjMxMi0zLjA3Mmw0MjAuODY0LTIyNS4yOGM5LjIxNi00LjA5NiAxNC4zMzYtMTQuMzM2IDE0LjMzNi0yNC41NzZzLTUuMTItMTkuNDU2LTE0LjMzNi0yNC41NzZ6TTk0Ny4yIDcxOC44NDhsLTExOC43ODQtNjMuNDg4Yy0xNC4zMzYtNy4xNjgtNDEuOTg0LTEuMDI0LTQ5LjE1MiAxMi4yODgtNy4xNjggMTQuMzM2LTUuMTIgMzYuODY0IDguMTkyIDQ0LjAzMmw1OC4zNjggMzIuNzY4LTMzMi44IDE2NC44NjQtMzMzLjgyNC0xNjQuODY0IDU3LjM0NC0zMi43NjhjMTQuMzM2LTcuMTY4IDE1LjM2LTI5LjY5NiA4LjE5Mi00NC4wMzJzLTM0LjgxNi0xOC40MzItNDguMTI4LTExLjI2NGwtMTE4Ljc4NCA2Mi40NjRjLTguMTkyIDUuMTItMTQuMzM2IDE0LjMzNi0xNC4zMzYgMjUuNnM1LjEyIDE5LjQ1NiAxNC4zMzYgMjQuNTc2bDQyMS44ODggMjI1LjI4YzQuMDk2IDIuMDQ4IDkuMjE2IDMuMDcyIDEzLjMxMiAzLjA3MnM5LjIxNi0xLjAyNCAxMy4zMTItMy4wNzJsNDIwLjg2NC0yMjUuMjhjOS4yMTYtNS4xMiAxNC4zMzYtMTQuMzM2IDE0LjMzNi0yNC41NzZzLTUuMTItMjAuNDgtMTQuMzM2LTI1LjZ6Ij48L3BhdGg+Cjwvc3ZnPgo="}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}function r(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,i||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==e(i)?i:i+""}function a(t,i,r){return i=o(i),function(t,i){if(i&&("object"==e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,n()?Reflect.construct(i,r||[],o(t).constructor):i.apply(t,r))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n=function(){return!!e})()}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:i):a.value}},s.apply(null,arguments)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var c=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(e,IDEE.impl.Control),i=e,r=[{key:"addTo",value:function(t,i){var r,a,n,l,c;this.facadeMap_=t,(r=e,a="addTo",n=this,c=s(o(1&(l=3)?r.prototype:r),a,n),2&l&&"function"==typeof c?function(e){return c.apply(n,e)}:c)([t,i])}},{key:"registerEvent",value:function(e){this.facadeMap_=e,IDEE.utils.isNullOrEmpty(e)||(this.fnRender=this.renderControl.bind(this),this.olMap=e.getMapImpl(),this.olMap.on("rendercomplete",this.fnRender))}},{key:"renderControl",value:function(){this.facadeControl.render()}},{key:"removeRenderComplete",value:function(){IDEE.utils.isNullOrEmpty(this.olMap)||IDEE.utils.isNullOrEmpty(this.fnRender)||(this.olMap.un("rendercomplete",this.fnRender),this.fnRender=null)}},{key:"getTransformedCoordinates",value:function(e,t){var i=ol.proj.getTransform(e,"EPSG:4326");return this.getFullCoordinates(t,i(this.getXY(t)))}},{key:"getFullCoordinates",value:function(e,t){var i=e;return i[0]=t[0],i[1]=t[1],i}},{key:"getXY",value:function(e){for(var t=[],i=0;i<e.length;i+=1)t.push(e[i]);for(;t.length>2;)t.pop();return t}},{key:"destroy",value:function(){this.removeRenderComplete()}}],r&&t(i.prototype,r),n&&t(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n}(),d=i(582),u=i.n(d),p=i(106),h=i.n(p);const y=JSON.parse('{"exception":{"impl":"The implementation used cannot create LayerswitcherControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","ogcfeatures":"The provided url does not correspond to a valid layer type","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search","not_layerGroup":"The layer could not be added to the group"},"textHelp":{"help1":"The layer selector extension allows you to manage the layers displayed in a cartographic viewer.","help2":"This extension is customizable via parameters, so the extension can change from one viewer to another.","help3":"The different tools available in the layer selector are:","help4":"Add layer:","help5":"The first option is to enter the URL of a service in the text box. To do this, start from the IDEE services directory (https://www.idee.es/segun-tipo-de-servicio ) for example, using the Historical Satellite Mosaics service of Spain (https://wms-satelites-historicos.idee.es/satelites-historicos). When you click the search magnifying glass, a list of available layers appears in the service. In this example, we choose the \'filomena\' layer and add:","help6":"If you wanted more layers, you could select as many as you wanted. Once added, we would have the following appearance in the viewer:","help7":"Another way to load layers is from the IDEE service catalog (https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home). Click On the binoculars button, another text search engine and a list of possibilities will appear. For example, if we search for \'IGN administrative units\'","help8":"and we click on \'WMS of Administrative Units of Spain\', we can load the layers of the searched service:","help9":"Finally, layers can be loaded from a list of some available layers, which is configured by theme. In the example shown, the first edition of MTN 50 that is in cartography will be loaded:","help10":"The service layer selector will appear again, and the first edition of MTN 50 is marked and added to the map:","help11":"Once the layers are loaded into the map, you can work with them from the layer selector.","help12":"The first functionality would be to turn on the layers, this can be done from the yellow eye button that allows you to turn all of them on and off, or from the different green-red eye buttons to turn on or off just one layer:","help13":"Another functionality would be to delete the layer, from the trash can button.","help14":"Within the options of a visible layer, you have the tools to add transparency to the layer:","help15":"show layer legend:","help16":"center the viewer to the extent of the layer:","help17":"get more layer information:","help18":"and if the layer allows it, be able to apply another cartographic style:","help19":"The information relevant to the extension and its possible parameterization is documented in","help20":"The example of use of its parameters can be checked in"},"tooltip":"Layer Manager","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","defaultOptionGroup":"Add to map","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","change_name":"Change name","url_service":"Include URL of the service to load","query":"Consult","group":"Add layer group","loaded_services":"Preloaded geographic information layers","codsi_services":"Services Catalog","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","hide_service":"Hide service","show_service":"Show service","show_group":"Show group","hide_group":"Hide group","show_all_services":"Show all services","hide_all_services":"Hide all services","type_service":"Tipo de servicio","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found.","legend":"Legend","legend_error":"Error in legend","data_layer":"Data for GeoJSON layer","n_obj_geo":"Number of geographical objects","extension":"Extension","loading":"Loading","attributes":"Attributes","values":"Values","attribution":"Attribute","description":"Description","minzoom":"Minimum zoom","maxzoom":"Maximum zoom","center":"Center","addAllLayers":"Add all services","previous":"Previous","next":"Next","separatedby":"Identifier separated by commas \',\'","placeHolderLegend":"Text displayed in TOC","upload_file":"Upload file"}'),m=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LayerswitcherControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","ogcfeatures":"La url proporcionada no se corresponde con un tipo de capa válida","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda","not_layerGroup":"No se ha podido añadir la capa al grupo"},"textHelp":{"help1":"La extensión selector de capas permite gestionar las capas que se muestran en un visualizador cartográfico.","help2":"Esta extensión es personalizable mediante parámetros, por lo que la extensión puede cambiar de un visualizador a otro.","help3":"Las distintas herramientas disponibles en el selector de capas son:","help4":"Añadir capa:","help5":"La primer opción es la de introducir la URL de un servicio en la caja de texto. Para ello, partiendo del directorio de servicios IDEE (https://www.idee.es/segun-tipo-de-servicio) por ejemplo, utilizando el servicio de Mosaicos de Satélite históricos de España (https://wms-satelites-historicos.idee.es/satelites-historicos). Al darle a la lupa de buscar, aparece un listado de capas disponibles en el servicio. En este ejemplo, se elije la capa \'filomena\' y se le da a añadir:","help6":"En el caso que se quisieran más capas, se podrían seleccionar todas las que se quisieran. Una vez añadida, tendríamos el siguiente aspecto en el visualizador:","help7":"Otra forma de cargar capas es desde el catálogo de servicios d ela IDEE (https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home). Haciendo click sobre el botón de los prismáticos, aparecerá otro buscador por texto y un listado de posibilidades. Por ejemplo si buscamos \'unidades administrativas IGN\'","help8":"y hacemos click sobre \'WMS de Unidades Administrativas de España\', podremos cargar las capas del servicio buscado:","help9":"Por último, se pueden cargar capas desde un listado de algunas capas disponibles, que se configura por temáticas. En el ejemplo mostrado, se va a cargar la primera edición del MTN 50 que se encuentra en cartografía:","help10":"Aparecerá de nuevo el selector de capas del servicio, y se marca la primera edición del MTN 50 y se añade al mapa:","help11":"Una vez se tienen cargadas en el mapa las capas, se puede trabajar con ellas desde el selector de capas.","help12":"La primera funcionalidad sería la de encender las capas, esto se puede hacer desde el botón ojo amarillo que permite encender y apagar todas, o desde los distintos botones ojo verde-rojo para encender o apagar solo una capa:","help13":"Otra funcionalidad sería eliminar la capa, desde el botón del cubo de basura.","help14":"Dentro de las opciones de una capa visible, se tienen las herramientas de añadir transparencia a la capa:","help15":"mostrar la leyenda de la capa:","help16":"centrar el visualizador a la extensión de la capa:","help17":"obtener más información de la capa:","help18":"y en el caso que la capa lo permita, poder aplicarle otro estilo cartográfico:","help19":"La información relevante a la extensión y su posible parametrización está documentada en","help20":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Gestor de capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","change_name":"Cambiar nombre","defaultOptionGroup":"Añadir al mapa","url_service":"Incluir URL del servicio a cargar","query":"Consultar","group":"Añadir un grupo de capa","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","show_group":"Mostrar grupo","hide_group":"Ocultar grupo","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","hide_service":"Ocultar servicio","show_service":"Mostrar servicio","show_all_services":"Mostrar todos los servicios","hide_all_services":"Ocultar todos los servicios","type_service":"Tipo de servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature","legend":"Leyenda","legend_error":"Error en la leyenda","data_layer":"Datos para la capa","n_obj_geo":"Número de objetos geográficos","extension":"Extensión","loading":"Cargando","attributes":"Atributos","values":"Valores","attribution":"Atributo","description":"Descripción","minzoom":"Zoom mínimo","maxzoom":"Zoom máximo","center":"Centro","addAllLayers":"Añadir todos los servicios","previous":"Anterior","next":"Siguiente","separatedby":"Identificador separados por comas \',\'","placeHolderLegend":"Texto que se muestra en el TOC","upload_file":"Subir fichero"}');var f={en:y,es:m},v=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof IDEE.language.getLang&&(t=IDEE.language.getLang()),t),r=function(e){return"es"===e||"en"===e?f[e]:IDEE.language.getTranslation(e).layerswitcher}(i),a="";return IDEE.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(i,"' has not been defined.")):a=e.split(".").reduce(function(e,t){return e[t]},r),a},g=i(364),b=i.n(g),w=i(833),E=i.n(w),_=i(601),x=i.n(_),S=i(55),L=i.n(S),I=i(356),D=i.n(I),O=i(315),M=i.n(O),k=i(803),C=i.n(k),T=i(199),N=i.n(T),A=i(876),q=i.n(A),P=i(493),j=i.n(P);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function F(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},R.apply(this,arguments)}function G(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(t){F(e,t,i[t])})}return e}function H(e,t){if(null==e)return{};var i,r,a=function(e,t){if(null==e)return{};var i,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)i=n[r],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)i=n[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function W(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var B=W(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),U=W(/Edge/i),V=W(/firefox/i),Y=W(/safari/i)&&!W(/chrome/i)&&!W(/android/i),Q=W(/iP(ad|od|hone)/i),X=W(/chrome/i)&&W(/android/i),Z={capture:!1,passive:!1};function J(e,t,i){e.addEventListener(t,i,!B&&Z)}function K(e,t,i){e.removeEventListener(t,i,!B&&Z)}function $(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function ee(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function te(e,t,i,r){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&$(e,t):$(e,t))||r&&e===i)return e;if(e===i)break}while(e=ee(e))}return null}var ie,re=/\s+/g;function ae(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(re," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(re," ")}}function ne(e,t,i){var r=e&&e.style;if(r){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=i+("string"==typeof i?"":"px")}}function se(e,t){var i="";if("string"==typeof e)i=e;else do{var r=ne(e,"transform");r&&"none"!==r&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function oe(e,t,i){if(e){var r=e.getElementsByTagName(t),a=0,n=r.length;if(i)for(;a<n;a++)i(r[a],a);return r}return[]}function le(){var e=document.scrollingElement;return e||document.documentElement}function ce(e,t,i,r,a){if(e.getBoundingClientRect||e===window){var n,s,o,l,c,d,u;if(e!==window&&e!==le()?(s=(n=e.getBoundingClientRect()).top,o=n.left,l=n.bottom,c=n.right,d=n.height,u=n.width):(s=0,o=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||i)&&e!==window&&(a=a||e.parentNode,!B))do{if(a&&a.getBoundingClientRect&&("none"!==ne(a,"transform")||i&&"static"!==ne(a,"position"))){var p=a.getBoundingClientRect();s-=p.top+parseInt(ne(a,"border-top-width")),o-=p.left+parseInt(ne(a,"border-left-width")),l=s+n.height,c=o+n.width;break}}while(a=a.parentNode);if(r&&e!==window){var h=se(a||e),y=h&&h.a,m=h&&h.d;h&&(l=(s/=m)+(d/=m),c=(o/=y)+(u/=y))}return{top:s,left:o,bottom:l,right:c,width:u,height:d}}}function de(e,t,i){for(var r=me(e,!0),a=ce(e)[t];r;){var n=ce(r)[i];if(!("top"===i||"left"===i?a>=n:a<=n))return r;if(r===le())break;r=me(r,!1)}return!1}function ue(e,t,i){for(var r=0,a=0,n=e.children;a<n.length;){if("none"!==n[a].style.display&&n[a]!==gt.ghost&&n[a]!==gt.dragged&&te(n[a],i.draggable,e,!1)){if(r===t)return n[a];r++}a++}return null}function pe(e,t){for(var i=e.lastElementChild;i&&(i===gt.ghost||"none"===ne(i,"display")||t&&!$(i,t));)i=i.previousElementSibling;return i||null}function he(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===gt.clone||t&&!$(e,t)||i++;return i}function ye(e){var t=0,i=0,r=le();if(e)do{var a=se(e),n=a.a,s=a.d;t+=e.scrollLeft*n,i+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,i]}function me(e,t){if(!e||!e.getBoundingClientRect)return le();var i=e,r=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=ne(i);if(i.clientWidth<i.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!i.getBoundingClientRect||i===document.body)return le();if(r||t)return i;r=!0}}}while(i=i.parentNode);return le()}function fe(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ve(e,t){return function(){if(!ie){var i=arguments;1===i.length?e.call(this,i[0]):e.apply(this,i),ie=setTimeout(function(){ie=void 0},t)}}}function ge(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function be(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var we="Sortable"+(new Date).getTime();function Ee(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==ne(e,"display")&&e!==gt.ghost){t.push({target:e,rect:ce(e)});var i=G({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=se(e,!0);r&&(i.top-=r.f,i.left-=r.e)}e.fromRect=i}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var a=!1,n=0;t.forEach(function(e){var t=0,i=e.target,s=i.fromRect,o=ce(i),l=i.prevFromRect,c=i.prevToRect,d=e.rect,u=se(i,!0);u&&(o.top-=u.f,o.left-=u.e),i.toRect=o,i.thisAnimationDuration&&fe(l,o)&&!fe(s,o)&&(d.top-o.top)/(d.left-o.left)===(s.top-o.top)/(s.left-o.left)&&(t=function(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}(d,l,c,r.options)),fe(o,s)||(i.prevFromRect=s,i.prevToRect=o,t||(t=r.options.animation),r.animate(i,d,o,t)),t&&(a=!0,n=Math.max(n,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},t),i.thisAnimationDuration=t)}),clearTimeout(e),a?e=setTimeout(function(){"function"==typeof i&&i()},n):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,r){if(r){ne(e,"transition",""),ne(e,"transform","");var a=se(this.el),n=a&&a.a,s=a&&a.d,o=(t.left-i.left)/(n||1),l=(t.top-i.top)/(s||1);e.animatingX=!!o,e.animatingY=!!l,ne(e,"transform","translate3d("+o+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),ne(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),ne(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){ne(e,"transition",""),ne(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}var _e=[],xe={initializeByDefault:!0},Se={mount:function(e){for(var t in xe)xe.hasOwnProperty(t)&&!(t in e)&&(e[t]=xe[t]);_e.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var a=e+"Global";_e.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][a]&&t[r.pluginName][a](G({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](G({sortable:t},i)))})},initializePlugins:function(e,t,i,r){for(var a in _e.forEach(function(r){var a=r.pluginName;if(e.options[a]||r.initializeByDefault){var n=new r(e,t,e.options);n.sortable=e,n.options=e.options,e[a]=n,R(i,n.defaults)}}),e.options)if(e.options.hasOwnProperty(a)){var n=this.modifyOption(e,a,e.options[a]);void 0!==n&&(e.options[a]=n)}},getEventProperties:function(e,t){var i={};return _e.forEach(function(r){"function"==typeof r.eventProperties&&R(i,r.eventProperties.call(t[r.pluginName],e))}),i},modifyOption:function(e,t,i){var r;return _e.forEach(function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(r=a.optionListeners[t].call(e[a.pluginName],i))}),r}};function Le(e){var t=e.sortable,i=e.rootEl,r=e.name,a=e.targetEl,n=e.cloneEl,s=e.toEl,o=e.fromEl,l=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,y=e.extraEventProperties;if(t=t||i&&i[we]){var m,f=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||B||U?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=s||i,m.from=o||i,m.item=a||i,m.clone=n,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=u,m.originalEvent=p,m.pullMode=h?h.lastPutMode:void 0;var g=G({},y,Se.getEventProperties(r,t));for(var b in g)m[b]=g[b];i&&i.dispatchEvent(m),f[v]&&f[v].call(t,m)}}var Ie=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.evt,a=H(i,["evt"]);Se.pluginEvent.bind(gt)(e,t,G({dragEl:Oe,parentEl:Me,ghostEl:ke,rootEl:Ce,nextEl:Te,lastDownEl:Ne,cloneEl:Ae,cloneHidden:qe,dragStarted:Qe,putSortable:Ge,activeSortable:gt.active,originalEvent:r,oldIndex:Pe,oldDraggableIndex:ze,newIndex:je,newDraggableIndex:Fe,hideGhostForTarget:yt,unhideGhostForTarget:mt,cloneNowHidden:function(){qe=!0},cloneNowShown:function(){qe=!1},dispatchSortableEvent:function(e){De({sortable:t,name:e,originalEvent:r})}},a))};function De(e){Le(G({putSortable:Ge,cloneEl:Ae,targetEl:Oe,rootEl:Ce,oldIndex:Pe,oldDraggableIndex:ze,newIndex:je,newDraggableIndex:Fe},e))}var Oe,Me,ke,Ce,Te,Ne,Ae,qe,Pe,je,ze,Fe,Re,Ge,He,We,Be,Ue,Ve,Ye,Qe,Xe,Ze,Je,Ke,$e=!1,et=!1,tt=[],it=!1,rt=!1,at=[],nt=!1,st=[],ot="undefined"!=typeof document,lt=Q,ct=U||B?"cssFloat":"float",dt=ot&&!X&&!Q&&"draggable"in document.createElement("div"),ut=function(){if(ot){if(B)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),pt=function(e,t){var i=ne(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=ue(e,0,t),n=ue(e,1,t),s=a&&ne(a),o=n&&ne(n),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ce(a).width,c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+ce(n).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return!n||"both"!==o.clear&&o.clear!==d?"horizontal":"vertical"}return a&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=r&&"none"===i[ct]||n&&"none"===i[ct]&&l+c>r)?"vertical":"horizontal"},ht=function(e){function t(e,i){return function(r,a,n,s){var o=r.options.group.name&&a.options.group.name&&r.options.group.name===a.options.group.name;if(null==e&&(i||o))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(r,a,n,s),i)(r,a,n,s);var l=(i?r:a).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},r=e.group;r&&"object"==z(r)||(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},yt=function(){!ut&&ke&&ne(ke,"display","none")},mt=function(){!ut&&ke&&ne(ke,"display","")};ot&&document.addEventListener("click",function(e){if(et)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),et=!1,!1},!0);var ft=function(e){if(Oe){e=e.touches?e.touches[0]:e;var t=(a=e.clientX,n=e.clientY,tt.some(function(e){if(!pe(e)){var t=ce(e),i=e[we].options.emptyInsertThreshold,r=a>=t.left-i&&a<=t.right+i,o=n>=t.top-i&&n<=t.bottom+i;return i&&r&&o?s=e:void 0}}),s);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[we]._onDragOver(i)}}var a,n,s},vt=function(e){Oe&&Oe.parentNode[we]._isOutsideThisEl(e.target)};function gt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=R({},t),e[we]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==gt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in Se.initializePlugins(this,e,i),i)!(r in t)&&(t[r]=i[r]);for(var a in ht(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&dt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?J(e,"pointerdown",this._onTapStart):(J(e,"mousedown",this._onTapStart),J(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(J(e,"dragover",this),J(e,"dragenter",this)),tt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),R(this,Ee())}function bt(e,t,i,r,a,n,s,o){var l,c,d=e[we],u=d.options.onMove;return!window.CustomEvent||B||U?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=r,l.related=a||t,l.relatedRect=n||ce(t),l.willInsertAfter=o,l.originalEvent=s,e.dispatchEvent(l),u&&(c=u.call(d,l,s)),c}function wt(e){e.draggable=!1}function Et(){nt=!1}function _t(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function xt(e){return setTimeout(e,0)}function St(e){return clearTimeout(e)}gt.prototype={constructor:gt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Xe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Oe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,a=r.preventOnFilter,n=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,o=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||o,c=r.filter;if(function(e){st.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var r=t[i];r.checked&&st.push(r)}}(i),!Oe&&!(/mousedown|pointerdown/.test(n)&&0!==e.button||r.disabled||l.isContentEditable||(o=te(o,r.draggable,i,!1))&&o.animated||Ne===o)){if(Pe=he(o),ze=he(o,r.draggable),"function"==typeof c){if(c.call(this,e,o,this))return De({sortable:t,rootEl:l,name:"filter",targetEl:o,toEl:i,fromEl:i}),Ie("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some(function(r){if(r=te(l,r.trim(),i,!1))return De({sortable:t,rootEl:r,name:"filter",targetEl:o,fromEl:i,toEl:i}),Ie("filter",t,{evt:e}),!0})))return void(a&&e.cancelable&&e.preventDefault());r.handle&&!te(l,r.handle,i,!1)||this._prepareDragStart(e,s,o)}}},_prepareDragStart:function(e,t,i){var r,a=this,n=a.el,s=a.options,o=n.ownerDocument;if(i&&!Oe&&i.parentNode===n){var l=ce(i);if(Ce=n,Me=(Oe=i).parentNode,Te=Oe.nextSibling,Ne=i,Re=s.group,gt.dragged=Oe,He={target:Oe,clientX:(t||e).clientX,clientY:(t||e).clientY},Ve=He.clientX-l.left,Ye=He.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Oe.style["will-change"]="all",r=function(){Ie("delayEnded",a,{evt:e}),gt.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!V&&a.nativeDraggable&&(Oe.draggable=!0),a._triggerDragStart(e,t),De({sortable:a,name:"choose",originalEvent:e}),ae(Oe,s.chosenClass,!0))},s.ignore.split(",").forEach(function(e){oe(Oe,e.trim(),wt)}),J(o,"dragover",ft),J(o,"mousemove",ft),J(o,"touchmove",ft),J(o,"mouseup",a._onDrop),J(o,"touchend",a._onDrop),J(o,"touchcancel",a._onDrop),V&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Oe.draggable=!0),Ie("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(U||B))r();else{if(gt.eventCanceled)return void this._onDrop();J(o,"mouseup",a._disableDelayedDrag),J(o,"touchend",a._disableDelayedDrag),J(o,"touchcancel",a._disableDelayedDrag),J(o,"mousemove",a._delayedDragTouchMoveHandler),J(o,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&J(o,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Oe&&wt(Oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;K(e,"mouseup",this._disableDelayedDrag),K(e,"touchend",this._disableDelayedDrag),K(e,"touchcancel",this._disableDelayedDrag),K(e,"mousemove",this._delayedDragTouchMoveHandler),K(e,"touchmove",this._delayedDragTouchMoveHandler),K(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?J(document,"pointermove",this._onTouchMove):J(document,t?"touchmove":"mousemove",this._onTouchMove):(J(Oe,"dragend",this),J(Ce,"dragstart",this._onDragStart));try{document.selection?xt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if($e=!1,Ce&&Oe){Ie("dragStarted",this,{evt:t}),this.nativeDraggable&&J(document,"dragover",vt);var i=this.options;!e&&ae(Oe,i.dragClass,!1),ae(Oe,i.ghostClass,!0),gt.active=this,e&&this._appendGhost(),De({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(We){this._lastX=We.clientX,this._lastY=We.clientY,yt();for(var e=document.elementFromPoint(We.clientX,We.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(We.clientX,We.clientY))!==t;)t=e;if(Oe.parentNode[we]._isOutsideThisEl(e),t)do{if(t[we]){if(t[we]._onDragOver({clientX:We.clientX,clientY:We.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);mt()}},_onTouchMove:function(e){if(He){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,a=e.touches?e.touches[0]:e,n=ke&&se(ke,!0),s=ke&&n&&n.a,o=ke&&n&&n.d,l=lt&&Ke&&ye(Ke),c=(a.clientX-He.clientX+r.x)/(s||1)+(l?l[0]-at[0]:0)/(s||1),d=(a.clientY-He.clientY+r.y)/(o||1)+(l?l[1]-at[1]:0)/(o||1);if(!gt.active&&!$e){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ke){n?(n.e+=c-(Be||0),n.f+=d-(Ue||0)):n={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e,",").concat(n.f,")");ne(ke,"webkitTransform",u),ne(ke,"mozTransform",u),ne(ke,"msTransform",u),ne(ke,"transform",u),Be=c,Ue=d,We=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ke){var e=this.options.fallbackOnBody?document.body:Ce,t=ce(Oe,!0,lt,!0,e),i=this.options;if(lt){for(Ke=e;"static"===ne(Ke,"position")&&"none"===ne(Ke,"transform")&&Ke!==document;)Ke=Ke.parentNode;Ke!==document.body&&Ke!==document.documentElement?(Ke===document&&(Ke=le()),t.top+=Ke.scrollTop,t.left+=Ke.scrollLeft):Ke=le(),at=ye(Ke)}ae(ke=Oe.cloneNode(!0),i.ghostClass,!1),ae(ke,i.fallbackClass,!0),ae(ke,i.dragClass,!0),ne(ke,"transition",""),ne(ke,"transform",""),ne(ke,"box-sizing","border-box"),ne(ke,"margin",0),ne(ke,"top",t.top),ne(ke,"left",t.left),ne(ke,"width",t.width),ne(ke,"height",t.height),ne(ke,"opacity","0.8"),ne(ke,"position",lt?"absolute":"fixed"),ne(ke,"zIndex","100000"),ne(ke,"pointerEvents","none"),gt.ghost=ke,e.appendChild(ke),ne(ke,"transform-origin",Ve/parseInt(ke.style.width)*100+"% "+Ye/parseInt(ke.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,a=i.options;Ie("dragStart",this,{evt:e}),gt.eventCanceled?this._onDrop():(Ie("setupClone",this),gt.eventCanceled||((Ae=be(Oe)).draggable=!1,Ae.style["will-change"]="",this._hideClone(),ae(Ae,this.options.chosenClass,!1),gt.clone=Ae),i.cloneId=xt(function(){Ie("clone",i),gt.eventCanceled||(i.options.removeCloneOnHide||Ce.insertBefore(Ae,Oe),i._hideClone(),De({sortable:i,name:"clone"}))}),!t&&ae(Oe,a.dragClass,!0),t?(et=!0,i._loopId=setInterval(i._emulateDragOver,50)):(K(document,"mouseup",i._onDrop),K(document,"touchend",i._onDrop),K(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(i,r,Oe)),J(document,"drop",i),ne(Oe,"transform","translateZ(0)")),$e=!0,i._dragStartId=xt(i._dragStarted.bind(i,t,e)),J(document,"selectstart",i),Qe=!0,Y&&ne(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,r,a,n=this.el,s=e.target,o=this.options,l=o.group,c=gt.active,d=Re===l,u=o.sort,p=Ge||c,h=this,y=!1;if(!nt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=te(s,o.draggable,n,!0),O("dragOver"),gt.eventCanceled)return y;if(Oe.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||h._ignoreWhileAnimating===s)return k(!1);if(et=!1,c&&!o.disabled&&(d?u||(r=!Ce.contains(Oe)):Ge===this||(this.lastPutMode=Re.checkPull(this,c,Oe,e))&&l.checkPut(this,c,Oe,e))){if(a="vertical"===this._getDirection(e,s),t=ce(Oe),O("dragOverValid"),gt.eventCanceled)return y;if(r)return Me=Ce,M(),this._hideClone(),O("revert"),gt.eventCanceled||(Te?Ce.insertBefore(Oe,Te):Ce.appendChild(Oe)),k(!0);var m=pe(n,o.draggable);if(!m||function(e,t,i){var r=ce(pe(i.el,i.options.draggable)),a=10;return t?e.clientX>r.right+a||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+a}(e,a,this)&&!m.animated){if(m===Oe)return k(!1);if(m&&n===e.target&&(s=m),s&&(i=ce(s)),!1!==bt(Ce,n,Oe,t,s,i,e,!!s))return M(),n.appendChild(Oe),Me=n,C(),k(!0)}else if(s.parentNode===n){i=ce(s);var f,v,g,b=Oe.parentNode!==n,w=!function(e,t,i){var r=i?e.left:e.top,a=i?e.right:e.bottom,n=i?e.width:e.height,s=i?t.left:t.top,o=i?t.right:t.bottom,l=i?t.width:t.height;return r===s||a===o||r+n/2===s+l/2}(Oe.animated&&Oe.toRect||t,s.animated&&s.toRect||i,a),E=a?"top":"left",_=de(s,"top","top")||de(Oe,"top","top"),x=_?_.scrollTop:void 0;if(Xe!==s&&(v=i[E],it=!1,rt=!w&&o.invertSwap||b),f=function(e,t,i,r,a,n,s,o){var l=r?e.clientY:e.clientX,c=r?i.height:i.width,d=r?i.top:i.left,u=r?i.bottom:i.right,p=!1;if(!s)if(o&&Je<c*a){if(!it&&(1===Ze?l>d+c*n/2:l<u-c*n/2)&&(it=!0),it)p=!0;else if(1===Ze?l<d+Je:l>u-Je)return-Ze}else if(l>d+c*(1-a)/2&&l<u-c*(1-a)/2)return function(e){return he(Oe)<he(e)?1:-1}(t);if((p=p||s)&&(l<d+c*n/2||l>u-c*n/2))return l>d+c/2?1:-1;return 0}(e,s,i,a,w?1:o.swapThreshold,null==o.invertedSwapThreshold?o.swapThreshold:o.invertedSwapThreshold,rt,Xe===s),0!==f){var S=he(Oe);do{S-=f,g=Me.children[S]}while(g&&("none"===ne(g,"display")||g===ke))}if(0===f||g===s)return k(!1);Xe=s,Ze=f;var L=s.nextElementSibling,I=!1,D=bt(Ce,n,Oe,t,s,i,e,I=1===f);if(!1!==D)return 1!==D&&-1!==D||(I=1===D),nt=!0,setTimeout(Et,30),M(),I&&!L?n.appendChild(Oe):s.parentNode.insertBefore(Oe,I?L:s),_&&ge(_,0,x-_.scrollTop),Me=Oe.parentNode,void 0===v||rt||(Je=Math.abs(v-ce(s)[E])),C(),k(!0)}if(n.contains(Oe))return k(!1)}return!1}function O(o,l){Ie(o,h,G({evt:e,isOwner:d,axis:a?"vertical":"horizontal",revert:r,dragRect:t,targetRect:i,canSort:u,fromSortable:p,target:s,completed:k,onMove:function(i,r){return bt(Ce,n,Oe,t,i,ce(i),e,r)},changed:C},l))}function M(){O("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function k(t){return O("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(h),h!==p&&(ae(Oe,Ge?Ge.options.ghostClass:c.options.ghostClass,!1),ae(Oe,o.ghostClass,!0)),Ge!==h&&h!==gt.active?Ge=h:h===gt.active&&Ge&&(Ge=null),p===h&&(h._ignoreWhileAnimating=s),h.animateAll(function(){O("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===Oe&&!Oe.animated||s===n&&!s.animated)&&(Xe=null),o.dragoverBubble||e.rootEl||s===document||(Oe.parentNode[we]._isOutsideThisEl(e.target),!t&&ft(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function C(){je=he(Oe),Fe=he(Oe,o.draggable),De({sortable:h,name:"change",toEl:n,newIndex:je,newDraggableIndex:Fe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){K(document,"mousemove",this._onTouchMove),K(document,"touchmove",this._onTouchMove),K(document,"pointermove",this._onTouchMove),K(document,"dragover",ft),K(document,"mousemove",ft),K(document,"touchmove",ft)},_offUpEvents:function(){var e=this.el.ownerDocument;K(e,"mouseup",this._onDrop),K(e,"touchend",this._onDrop),K(e,"pointerup",this._onDrop),K(e,"touchcancel",this._onDrop),K(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;je=he(Oe),Fe=he(Oe,i.draggable),Ie("drop",this,{evt:e}),Me=Oe&&Oe.parentNode,je=he(Oe),Fe=he(Oe,i.draggable),gt.eventCanceled||($e=!1,rt=!1,it=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),St(this.cloneId),St(this._dragStartId),this.nativeDraggable&&(K(document,"drop",this),K(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Y&&ne(document.body,"user-select",""),ne(Oe,"transform",""),e&&(Qe&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ke&&ke.parentNode&&ke.parentNode.removeChild(ke),(Ce===Me||Ge&&"clone"!==Ge.lastPutMode)&&Ae&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),Oe&&(this.nativeDraggable&&K(Oe,"dragend",this),wt(Oe),Oe.style["will-change"]="",Qe&&!$e&&ae(Oe,Ge?Ge.options.ghostClass:this.options.ghostClass,!1),ae(Oe,this.options.chosenClass,!1),De({sortable:this,name:"unchoose",toEl:Me,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ce!==Me?(je>=0&&(De({rootEl:Me,name:"add",toEl:Me,fromEl:Ce,originalEvent:e}),De({sortable:this,name:"remove",toEl:Me,originalEvent:e}),De({rootEl:Me,name:"sort",toEl:Me,fromEl:Ce,originalEvent:e}),De({sortable:this,name:"sort",toEl:Me,originalEvent:e})),Ge&&Ge.save()):je!==Pe&&je>=0&&(De({sortable:this,name:"update",toEl:Me,originalEvent:e}),De({sortable:this,name:"sort",toEl:Me,originalEvent:e})),gt.active&&(null!=je&&-1!==je||(je=Pe,Fe=ze),De({sortable:this,name:"end",toEl:Me,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ie("nulling",this),Ce=Oe=Me=ke=Te=Ae=Ne=qe=He=We=Qe=je=Fe=Pe=ze=Xe=Ze=Ge=Re=gt.dragged=gt.ghost=gt.clone=gt.active=null,st.forEach(function(e){e.checked=!0}),st.length=Be=Ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Oe&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,r=0,a=i.length,n=this.options;r<a;r++)te(e=i[r],n.draggable,this.el,!1)&&t.push(e.getAttribute(n.dataIdAttr)||_t(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,r){var a=i.children[r];te(a,this.options.draggable,i,!1)&&(t[e]=a)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return te(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var r=Se.modifyOption(this,e,t);i[e]=void 0!==r?r:t,"group"===e&&ht(i)},destroy:function(){Ie("destroy",this);var e=this.el;e[we]=null,K(e,"mousedown",this._onTapStart),K(e,"touchstart",this._onTapStart),K(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(K(e,"dragover",this),K(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),tt.splice(tt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!qe){if(Ie("hideClone",this),gt.eventCanceled)return;ne(Ae,"display","none"),this.options.removeCloneOnHide&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),qe=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(qe){if(Ie("showClone",this),gt.eventCanceled)return;Ce.contains(Oe)&&!this.options.group.revertClone?Ce.insertBefore(Ae,Oe):Te?Ce.insertBefore(Ae,Te):Ce.appendChild(Ae),this.options.group.revertClone&&this.animate(Oe,Ae),ne(Ae,"display",""),qe=!1}}else this._hideClone()}},ot&&J(document,"touchmove",function(e){(gt.active||$e)&&e.cancelable&&e.preventDefault()}),gt.utils={on:J,off:K,css:ne,find:oe,is:function(e,t){return!!te(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:ve,closest:te,toggleClass:ae,clone:be,index:he,nextTick:xt,cancelNextTick:St,detectDirection:pt,getChild:ue},gt.get=function(e){return e[we]},gt.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(gt.utils=G({},gt.utils,e.utils)),Se.mount(e)})},gt.create=function(e,t){return new gt(e,t)},gt.version="1.10.2";var Lt,It,Dt,Ot,Mt,kt,Ct=[],Tt=!1;function Nt(){Ct.forEach(function(e){clearInterval(e.pid)}),Ct=[]}function At(){clearInterval(kt)}var qt=ve(function(e,t,i,r){if(t.scroll){var a,n=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,l=t.scrollSpeed,c=le(),d=!1;It!==i&&(It=i,Nt(),Lt=t.scroll,a=t.scrollFn,!0===Lt&&(Lt=me(i,!0)));var u=0,p=Lt;do{var h=p,y=ce(h),m=y.top,f=y.bottom,v=y.left,g=y.right,b=y.width,w=y.height,E=void 0,_=void 0,x=h.scrollWidth,S=h.scrollHeight,L=ne(h),I=h.scrollLeft,D=h.scrollTop;h===c?(E=b<x&&("auto"===L.overflowX||"scroll"===L.overflowX||"visible"===L.overflowX),_=w<S&&("auto"===L.overflowY||"scroll"===L.overflowY||"visible"===L.overflowY)):(E=b<x&&("auto"===L.overflowX||"scroll"===L.overflowX),_=w<S&&("auto"===L.overflowY||"scroll"===L.overflowY));var O=E&&(Math.abs(g-n)<=o&&I+b<x)-(Math.abs(v-n)<=o&&!!I),M=_&&(Math.abs(f-s)<=o&&D+w<S)-(Math.abs(m-s)<=o&&!!D);if(!Ct[u])for(var k=0;k<=u;k++)Ct[k]||(Ct[k]={});Ct[u].vx==O&&Ct[u].vy==M&&Ct[u].el===h||(Ct[u].el=h,Ct[u].vx=O,Ct[u].vy=M,clearInterval(Ct[u].pid),0==O&&0==M||(d=!0,Ct[u].pid=setInterval(function(){r&&0===this.layer&&gt.active._onTouchMove(Mt);var t=Ct[this.layer].vy?Ct[this.layer].vy*l:0,i=Ct[this.layer].vx?Ct[this.layer].vx*l:0;"function"==typeof a&&"continue"!==a.call(gt.dragged.parentNode[we],i,t,e,Mt,Ct[this.layer].el)||ge(Ct[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=me(p,!1)));Tt=d}},30),Pt=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,a=e.activeSortable,n=e.dispatchSortableEvent,s=e.hideGhostForTarget,o=e.unhideGhostForTarget;if(t){var l=i||a;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);o(),l&&!l.el.contains(d)&&(n("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function jt(){}function zt(){}jt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=ue(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:Pt},R(jt,{pluginName:"revertOnSpill"}),zt.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Pt},R(zt,{pluginName:"removeOnSpill"});gt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?J(document,"dragover",this._handleAutoScroll):this.options.supportPointer?J(document,"pointermove",this._handleFallbackAutoScroll):t.touches?J(document,"touchmove",this._handleFallbackAutoScroll):J(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):(K(document,"pointermove",this._handleFallbackAutoScroll),K(document,"touchmove",this._handleFallbackAutoScroll),K(document,"mousemove",this._handleFallbackAutoScroll)),At(),Nt(),clearTimeout(ie),ie=void 0},nulling:function(){Mt=It=Lt=Tt=kt=Dt=Ot=null,Ct.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,n=document.elementFromPoint(r,a);if(Mt=e,t||U||B||Y){qt(e,this.options,n,t);var s=me(n,!0);!Tt||kt&&r===Dt&&a===Ot||(kt&&At(),kt=setInterval(function(){var n=me(document.elementFromPoint(r,a),!0);n!==s&&(s=n,Nt()),qt(e,i.options,n,t)},10),Dt=r,Ot=a)}else{if(!this.options.bubbleScroll||me(n,!0)===le())return void Nt();qt(e,this.options,me(n,!1),!1)}}},R(e,{pluginName:"scroll",initializeByDefault:!0})}),gt.mount(zt,jt);const Ft=gt;var Rt=i(701),Gt=i.n(Rt),Ht="m-layerswitcher-icons-desplegar",Wt="m-layerswitcher-icons-colapsar",Bt=function(e){var t=[];return e.getImpl().getGroupedLayers().forEach(function(e){e.displayInLayerSwitcher&&(t.push(e),e.getLayers().forEach(function(e){e.type!==IDEE.layer.type.LayerGroup&&t.push(e)}))}),t},Ut=function(e){var t=e.getLayerGroup().filter(function(e){return!1===e.isBase&&e.displayInLayerSwitcher}).reverse(),i=IDEE.template.compileSync(Gt(),{vars:{groups:t,translations:{defaultSelectOption:v("defaultOptionGroup")},order:0}});document.querySelector("#m-layerswitcher-groups-fields").appendChild(i)},Vt=function(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?e.filter(function(e){var t=!0===e.transparent,i=!0===e.displayInLayerSwitcher,r=e instanceof IDEE.layer.LayerGroup;return t&&i&&r}):e.filter(function(e){var t=!0===e.transparent,i=!0===e.displayInLayerSwitcher;return t&&i})};function Yt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}var Xt=["OSM","GeoJSON","MBTilesVector","MBTiles","LayerGroup"],Zt=function(e,t,i){var r=e,a=t.children;if("LayerGroup"===t.getAttribute("data-layer-type")){var n=t.getAttribute("data-layer-id"),s=i.filter(function(e){return e.idLayer===n});s.length>0&&(s[0].setZIndex(r),r-=1)}return a&&a.length>0&&Yt(a).forEach(function(e){if(!e.classList.contains("m-layerswitcher-sectionPanel-header"))if("LayerGroup"===e.getAttribute("data-layer-type")||e.classList.contains("m-layerswitcher-ullayersGroup"))r=Zt(r,e,i);else{var t=e.getAttribute("data-layer-id"),a=e.getAttribute("data-layer-name"),n=e.getAttribute("data-layer-url")||void 0,s=e.getAttribute("data-layer-type"),o=i.filter(function(e){return e.idLayer===t&&e.name===a&&(e.url===n||void 0===e.url&&Xt.includes(e.type))&&e.type===s});o.length>0&&(o[0].setZIndex(r),r-=1)}}),r},Jt=function(e){return function(t){if(!t.to.classList.contains("m-layerswitcher-ullayers")||!t.from.classList.contains("m-layerswitcher-ullayers")){var i=t.from.getAttribute("data-layer-id"),r=t.item.getAttribute("data-layer-id"),a=t.to.getAttribute("data-layer-id"),n=t.to.classList.contains("m-layerswitcher-ullayers")&&t.from.classList.contains("m-layerswitcher-ullayersGroup"),s=t.from.classList.contains("m-layerswitcher-ullayers")&&t.to.classList.contains("m-layerswitcher-ullayersGroup"),o=t.from.classList.contains("m-layerswitcher-ullayersGroup")&&t.to.classList.contains("m-layerswitcher-ullayersGroup"),l=n||o?e.getLayerGroup().find(function(e){return e.idLayer===i}):null,c=s||o?e.getLayerGroup().find(function(e){return e.idLayer===a}):null,d=n||o?l.getLayers().find(function(e){return e.idLayer===r}):e.getLayers().find(function(e){return e.idLayer===r});"true"===d.checkedLayer&&(d.checkedLayer="false",d.setVisible(!1)),(n||o)&&l.ungroup(d,!0),(s||o)&&(e.removeLayers(d),c.addLayers(d))}}},Kt=function(e,t){return function(t){var i,r=e.getLayers().concat(Bt(e)).filter(function(e){return!0===e.displayInLayerSwitcher});i=Math.max.apply(Math,Yt(r.map(function(e){return e.getZIndex()})));var a=document.querySelector(".m-layerswitcher-ullayers");Zt(i,a,r)}};const $t=function(e,t){Yt(document.querySelectorAll(".nested-sortable")).forEach(function(t){new Ft(t,{group:"nested",animation:150,fallbackOnBody:!0,preventOnFilter:!1,ghostClass:"m-layerswitcher-gray-shadow",filter:".m-layerswitcher-opacity",swapThreshold:.65,onAdd:Jt(e),onEnd:Kt(e)})})};var ei=function(e){setTimeout(function(){var t=document.querySelector(e);t.focus(),t.click()},100)},ti=i(346),ii=i.n(ti),ri=i(957),ai=i.n(ri);function ni(e){return function(e){if(Array.isArray(e))return si(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return si(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?si(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}var oi={title:v("title"),name:v("name"),abstract:v("abstract"),provider:v("provider"),service_info:v("service_info"),download_center:v("download_center"),see_more:v("see_more"),metadata_abstract:v("metadata_abstract"),responsible:v("responsible"),access_constraints:v("access_constraints"),use_constraints:v("use_constraints"),online_resources:v("online_resources"),see_more_layer:v("see_more_layer"),see_more_service:v("see_more_service"),metadata:v("metadata"),attributes:v("attributes")},li={title:v("title"),name:v("name"),n_obj_geo:v("n_obj_geo"),extension:v("extension"),attributes:v("attributes"),values:v("values"),attribution:v("attribution"),description:v("description"),minzoom:v("minzoom"),maxzoom:v("maxzoom"),center:v("center")},ci="https://componentes.idee.es/estaticos/imagenes/leyenda/legend-default.png",di=["WMTS","WFS","MBTilesVector","MBTiles","OSM","XYZ","TMS","GeoJSON","KML","OGCAPIFeatures","Vector","GenericRaster","GenericVector","MVT","GeoTIFF","MapLibre"],ui=function(e,t,i){if(t.className.indexOf("m-layerswitcher-title-box")>-1||t.className.indexOf("m-layerswitcher-sectionPanel-header-text")>-1){var r=IDEE.template.compileSync(ii(),{jsonp:!0,parseToHtml:!1,vars:{name:e.legend||e.name,translations:{change:v("change")},order:i}});IDEE.dialog.info(r,v("change_name"),i),document.querySelector("#m-layer-change-name button").addEventListener("click",function(){!function(e,t){var i=t,r=document.querySelector("div.m-api-idee-container div.m-dialog #m-layer-change-name input").value.trim();r.length>0&&(e.setLegend(r),document.querySelector("div.m-api-idee-container div.m-dialog").remove(),i.lastChild.textContent=" ".concat(r," "))}(e,t)});var a=document.querySelector("div.m-dialog.info div.m-button > button");a.innerHTML=v("close"),a.style.width="75px",a.style.backgroundColor="#71a7d3"}},pi=function(e,t,i){return new Promise(function(t){var i="";if("TMS"===e.type)i=e.url.replace("{z}/{x}/{-y}","0/0/0");else if("XYZ"===e.type)i=e.url.replace("{z}/{x}/{y}","0/0/0");else if("OSM"===e.type){var r=e.getImpl().getLayer().getSource().getUrls();r.length>0&&(r=r[0]),i=r.replace("{z}/{x}/{y}","0/0/0")}""!==i?IDEE.remote.get(i).then(function(e){200!==e.code&&(i=""),t(i)}):t("error legend")})},hi=function(e){var t=e;t.checkedLayer="false",t.setVisible(!1)},yi=function(e){var t=e;t.checkedLayer="true",t.setVisible(!0),"LayerGroup"===e.type&&1===e.getLayers().length&&yi(e.getLayers()[0])},mi=function(e,t){var i=function(e,t){var i=null,r=function(t){t.getLayers().forEach(function(a){a.idLayer===e.idLayer?i=t:a.type===IDEE.layer.type.LayerGroup&&r(a)})};return t.getLayerGroup().forEach(function(e){r(e)}),i}(e,t);document.querySelector('[data-layer-id="'.concat(i.idLayer,'"]')).checked||document.querySelector('[data-layer-id="'.concat(i.idLayer,'"]')).click(),i&&i.getLayers().forEach(function(t){t.idLayer===e.idLayer?yi(t):hi(t)})},fi=function(e){return e.filter(function(e){return!0===e.displayInLayerSwitcher&&!1===e.isBase&&e.isVisible()})||[]},vi=function(e,t){if(1===e.length&&t.forEach(function(t){t.getAttribute("data-layer-id")===e[0].idLayer&&t.click()}),e.length>1){var i=ni(t).find(function(t){return t.getAttribute("data-layer-id")===e[e.length-1].idLayer});i&&i.click()}},gi=function(e,t,i){if(i.target.className.indexOf("m-layerswitcher-icons-style")>-1){var r=[],a=!1;IDEE.utils.isUndefined(e.capabilitiesMetadata)||IDEE.utils.isUndefined(e.capabilitiesMetadata.style)||(r=e.capabilitiesMetadata.style),e instanceof IDEE.layer.Vector&&(r=e.predefinedStyles,a=!0);var n=IDEE.template.compileSync(ai(),{jsonp:!0,parseToHtml:!1,vars:{styles:r,isVectorLayer:a,translations:{select_style:v("select_style"),change:v("change"),style:v("style"),default_style:v("default_style"),selected:v("selected")}}});IDEE.dialog.info(n,v("configure_layer"),t),ei(".m-title span"),setTimeout(function(){document.querySelector("#m-layerswitcher-style button").addEventListener("click",function(){!function(e,t){var i=document.querySelector("#m-layerswitcher-style-select").value;if(""!==i){if(e instanceof IDEE.layer.Vector){if(!IDEE.utils.isNullOrEmpty(t)){var r=t[i];e.clearStyle(),0===i?e.setStyle():e.setStyle(r)}}else{e.getImpl().getLayer().getSource().updateParams({STYLES:i});var a=e.capabilitiesMetadata;if(!IDEE.utils.isNullOrEmpty(a)&&!IDEE.utils.isNullOrEmpty(a.style)){var n=e.capabilitiesMetadata.style.filter(function(e){return e.Name===i});if(n.length>0&&n[0].LegendURL.length>0){var s=n[0].LegendURL[0].OnlineResource;e.setLegendURL(s)}}}document.querySelector("div.m-api-idee-container div.m-dialog").remove()}}(e,r)}),document.querySelector("div.m-api-idee-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var t=document.querySelector("div.m-dialog.info div.m-button > button");t.innerHTML=v("close"),t.style.width="75px",t.style.backgroundColor="#71a7d3",setTimeout(function(){document.querySelector(".m-layerswitcher-style-container").focus()},500)},10)}};function bi(e){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(e)}function wi(){var e,t,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function n(i,r,a,n){var l=r&&r.prototype instanceof o?r:o,c=Object.create(l.prototype);return Ei(c,"_invoke",function(i,r,a){var n,o,l,c=0,d=a||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,i){return n=t,o=0,l=e,p.n=i,s}};function h(i,r){for(o=i,l=r,t=0;!u&&c&&!a&&t<d.length;t++){var a,n=d[t],h=p.p,y=n[2];i>3?(a=y===r)&&(l=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=h&&((a=i<2&&h<n[1])?(o=0,p.v=r,p.n=n[1]):h<y&&(a=i<3||n[0]>r||r>y)&&(n[4]=i,n[5]=r,p.n=y,o=0))}if(a||i>1)return s;throw u=!0,r}return function(a,d,y){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&h(d,y),o=d,l=y;(t=o<2?e:l)||!u;){n||(o?o<3?(o>1&&(p.n=-1),h(o,l)):p.n=l:p.v=l);try{if(c=2,n){if(o||(a="next"),t=n[a]){if(!(t=t.call(n,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=n.return)&&t.call(n),o<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),o=1);n=e}else if((t=(u=p.n<0)?l:i.call(r,p))!==s)break}catch(t){n=e,o=1,l=t}finally{c=1}}return{value:t,done:u}}}(i,a,n),!0),c}var s={};function o(){}function l(){}function c(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(Ei(t={},r,function(){return this}),t),u=c.prototype=o.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Ei(e,a,"GeneratorFunction")),e.prototype=Object.create(u),e}return l.prototype=c,Ei(u,"constructor",c),Ei(c,"constructor",l),l.displayName="GeneratorFunction",Ei(c,a,"GeneratorFunction"),Ei(u),Ei(u,a,"Generator"),Ei(u,r,function(){return this}),Ei(u,"toString",function(){return"[object Generator]"}),(wi=function(){return{w:n,m:p}})()}function Ei(e,t,i,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Ei=function(e,t,i,r){function n(t,i){Ei(e,t,function(e){return this._invoke(t,i,e)})}t?a?a(e,t,{value:i,enumerable:!r,configurable:!r,writable:!r}):e[t]=i:(n("next",0),n("throw",1),n("return",2))},Ei(e,t,i,r)}function _i(e){return function(e){if(Array.isArray(e))return Li(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Si(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Si(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw n}}}}function Si(e,t){if(e){if("string"==typeof e)return Li(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Li(e,t):void 0}}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function Ii(e,t,i,r,a,n,s){try{var o=e[n](s),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function Di(e){return function(){var t=this,i=arguments;return new Promise(function(r,a){var n=e.apply(t,i);function s(e){Ii(n,r,a,s,o,"next",e)}function o(e){Ii(n,r,a,s,o,"throw",e)}s(void 0)})}}function Oi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function Mi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(i),!0).forEach(function(t){ki(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Oi(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function ki(e,t,i){return(t=Ti(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ci(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ti(r.key),r)}}function Ti(e){var t=function(e,t){if("object"!=bi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bi(t)?t:t+""}function Ni(e,t,i){return t=qi(t),function(e,t){if(t&&("object"==bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ai()?Reflect.construct(t,i||[],qi(e).constructor):t.apply(e,i))}function Ai(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ai=function(){return!!e})()}function qi(e){return qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qi(e)}function Pi(e,t){return Pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pi(e,t)}var ji="#m-layerswitcher-layerGroup",zi="#m-layerswitcher-addservices-codsi",Fi="#m-layerswitcher-addservices-codsi-btn",Ri="#m-layerswitcher-addservices-search-input",Gi="#m-layerswitcher-ogcCContainer",Hi="#m-layerswitcher-addservices-results",Wi="#m-layerswitcher-layerContainer",Bi="#m-layerswitcher-addservices-list-btn",Ui="#m-layerswitcher-addservices-suggestions",Vi="#m-layerswitcher-addservices-search-btn",Yi=[1,2,3],Qi=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(c)||IDEE.utils.isObject(c)&&IDEE.utils.isNullOrEmpty(Object.keys(c)))&&IDEE.exception(v("exception.impl"));var r=new c;return t=Ni(this,e,[r,"Layerswitcher"]),r.facadeControl=t,t.pages_={total:0,actual:1,element:0},t.numPages_=5,t.map_=void 0,t.template_=void 0,t.isDraggable_=i.isDraggable,t.modeSelectLayers=i.modeSelectLayers,t.isCheckedLayerRadio=!1,t.overlayLayers=[],t.statusShowHideAllLayers=!0,t.isAddLayers=!!IDEE.utils.isNullOrEmpty(i.addLayers)||i.addLayers,t.isStatusLayers=!!IDEE.utils.isNullOrEmpty(i.statusLayers)||i.statusLayers,t.tools=i.tools,t.isTransparency=!1,t.isLegend=!1,t.isZoom=!1,t.isInformation=!1,t.isStyle=!1,t.isDelete=!1,t.isMoveLayers=i.isMoveLayers,t.collapsed=i.collapsed,t.precharged=i.precharged,t.http=i.http,t.https=i.https,t.filterName=void 0,t.stateSelectAll=!1,t.codsiActive=i.showCatalog,t.useProxy=i.useProxy,t.statusProxy=i.statusProxy,t.select_codsi=1,t.displayLabel=i.displayLabel,t.order=i.order,t.useAttributions_=i.useAttributions,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pi(e,t)}(e,IDEE.Control),t=e,i=[{key:"createView",value:function(e){var t=this;return this.map_=e,IDEE.utils.isString(this.tools)&&(this.tools=this.tools.split(",")),this.tools.forEach(function(e){"transparency"===e&&(t.isTransparency=!0),"legend"===e&&(t.isLegend=!0),"zoom"===e&&(t.isZoom=!0),"information"===e&&(t.isInformation=!0),"style"===e&&(t.isStyle=!0),"delete"===e&&(t.isDelete=!0)}),e.on(IDEE.evt.ADDED_LAYER,function(e){"radio"===t.modeSelectLayers&&!0===t.isCheckedLayerRadio&&e.forEach(function(e){!1===e.isBase&&e.displayInLayerSwitcher&&(e instanceof IDEE.layer.LayerGroup?t.recursiveVisibleHide_(e,!1):e.setVisible(!1))})}),new Promise(function(i){t.getTemplateVariables(e).then(function(r){var a=IDEE.template.compileSync(u(),{vars:r});t.template_=a,t.template_.addEventListener("click",t.clickLayer.bind(t),!1),t.template_.addEventListener("input",t.inputLayer.bind(t),!1),t.getImpl().registerEvent(e),t.template_.querySelector("#m-layerswitcher-addlayers").addEventListener("click",t.openAddServices.bind(t),!1),t.template_.querySelector("#m-layerswitcher-addlayers").addEventListener("touchstart",t.openAddServices.bind(t),!1),t.accessibilityTab(t.template_),i(t.template_)})})}},{key:"recursiveVisibleHide_",value:function(e,t){var i=this;e.getLayers().forEach(function(e){e instanceof IDEE.layer.LayerGroup?i.recursiveVisibleHide_(e,t):e.setVisible(t)})}},{key:"addEventPanel",value:function(e){var t=this;e.getButtonPanel().parentElement.classList.contains("collapsed")&&setTimeout(function(){t.getImpl().removeRenderComplete()},501),e.getButtonPanel().addEventListener("click",this.collapsedPlugin.bind(this),!1),this.isDraggable_&&IDEE.utils.draggabillyPlugin(e,"#m-layerswitcher-title")}},{key:"getTemplateVariables",value:function(e){var t=this;return new Promise(function(i,r){IDEE.utils.isNullOrEmpty(e)||(t.overlayLayers=e.getLayers().filter(function(e){var t=!0===e.transparent,i=!0===e.displayInLayerSwitcher,r=e instanceof IDEE.layer.LayerGroup;return t&&i&&!r}),Promise.all(t.overlayLayers.map(t.parseLayerForTemplate_.bind(t))).then(function(r){i(Mi({someLayerGroup:e.getLayerGroup().length>0,overlayLayers:r},t.getTemplateVariablesValues()))}))})}},{key:"getTemplateVariablesValues",value:function(){return{translations:{layers:v("layers"),show_hide:v("show_hide"),hide_service:v("hide_service"),show_service:v("show_service"),changeName:v("change_name"),show_all_services:v("show_all_services"),hide_all_services:v("hide_all_services"),zoom:v("zoom"),info_metadata:v("info_metadata"),remove_layer:v("remove_layer"),change_style:v("change_style"),add:v("add")},allVisible:!this.statusShowHideAllLayers,isRadio:"radio"===this.modeSelectLayers,isEyes:"eyes"===this.modeSelectLayers,isTransparency:this.isTransparency,isLegend:this.isLegend,isZoom:this.isZoom,isInformation:this.isInformation,isStyle:this.isStyle,isDelete:this.isDelete,displayLabel:!this.displayLabel,isAddLayers:!this.isAddLayers,isStatusLayers:!this.isStatusLayers}}},{key:"parseLayerForTemplate_",value:function(e){var t=e.legend||e.name,i=!IDEE.utils.isNullOrEmpty(e.capabilitiesMetadata)&&!IDEE.utils.isNullOrEmpty(e.capabilitiesMetadata.abstract);return new Promise(function(r){var a=i&&e.capabilitiesMetadata.style.length>1||e instanceof IDEE.layer.Vector&&!IDEE.utils.isNullOrEmpty(e.predefinedStyles)&&e.predefinedStyles.length>1;"KML"===e.type&&(null===e.options||e.options.extractStyles||IDEE.utils.isUndefined(e.options.extractStyles))&&(a=!1),r({title:t,type:e.type,dataOrder:e.getZIndex(),visible:!0===e.isVisible(),idLayer:e.idLayer,id:e.name,url:e.url,outOfRange:!e.inRange(),checkedLayer:e.checkedLayer||"false",opacity:e.getOpacity(),metadata:i,hasStyles:a})})}},{key:"generateTemplateLayerGroup",value:(n=Di(wi().m(function e(){var t,i,r,a,n,s,o=this;return wi().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==(t=Vt(this.map_.getLayers())).length){e.n=1;break}return e.a(2);case 1:i=xi(t),e.p=2,i.s();case 3:if((r=i.n()).done){e.n=6;break}if(!((a=r.value)instanceof IDEE.layer.LayerGroup)){e.n=5;break}return e.n=4,this.recursiveLayerGroupTemplate_(a);case 4:_i((n=e.v).querySelectorAll(".m-layerswitcher-ullayersGroup")).forEach(function(e){o.orderLayers(e)}),this.template_.querySelector(".m-layerswitcher-ullayers").appendChild(n);case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,s=e.v,i.e(s);case 8:return e.p=8,i.f(),e.f(8);case 9:return e.a(2)}},e,this,[[2,7,8,9]])})),function(){return n.apply(this,arguments)})},{key:"recursiveLayerGroupTemplate_",value:function(e){var t=this;return new Promise(function(i,r){t.parseLayerForTemplate_(e).then(function(a){var n,s=IDEE.template.compileSync(L(),{vars:Mi(Mi({changeName:v("change_name"),displayGroup:void 0===e.display||e.display,show_group:v("show_group"),hide_group:v("hide_group"),nameRadio:null===e.getImpl().rootGroup?"m-layerswitcher-radioLayers":e.getImpl().rootGroup.idLayer},a),t.getTemplateVariablesValues())}),o=(n=Vt(e.getLayers(),!1),n.sort(function(e,t){return e.getZIndex()-t.getZIndex()}).reverse()).map(function(i){return i instanceof IDEE.layer.LayerGroup?t.recursiveLayerGroupTemplate_(i).then(function(e){s.querySelector(".m-layerswitcher-ullayersGroup").appendChild(e)}):t.parseLayerForTemplate_(i).then(function(i){var r=IDEE.template.compileSync(D(),{vars:Mi(Mi({nameRadio:e.idLayer},i),t.getTemplateVariablesValues())});s.querySelector(".m-layerswitcher-ullayersGroup").appendChild(r)})});Promise.all(o).then(function(){return i(s)}).catch(r)}).catch(r)})}},{key:"render",value:(a=Di(wi().m(function e(){var t,i,r,a,n;return wi().w(function(e){for(;;)switch(e.n){case 0:if(0===document.getElementById("m-layerswitcher-content").childElementCount&&(this.statusShowHideAllLayers=this.map_.getLayers().find(function(e){return!(!1!==e.isBase||!e.displayInLayerSwitcher)})),void 0!==this.statusShowHideAllLayers){e.n=1;break}return e.a(2);case 1:return e.n=2,this.getTemplateVariables(this.map_);case 2:return t=e.v,null!==document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers")&&(i=document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers").scrollTop),r=IDEE.template.compileSync(h(),{vars:t}),this.template_.querySelector("#m-layerswitcher-content").innerHTML=r.innerHTML,e.n=3,this.generateTemplateLayerGroup();case 3:a=this.template_.querySelector(".m-layerswitcher-ullayers"),this.orderLayers(a),null!==this.template_.querySelector(".m-layerswitcher-ullayers")&&this.isMoveLayers&&$t(this.map_,this.overlayLayers),void 0!==i&&null!==(n=document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers"))&&(n.scrollTop=i),this.defaultRangeSelect_();case 4:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"defaultRangeSelect_",value:function(){if("radio"===this.modeSelectLayers&&!1===this.isCheckedLayerRadio){var e=this.template_.querySelectorAll("input[type=radio]");e.length>0&&(this.isCheckedLayerRadio=!0,function(e,t){var i=t.getLayers().filter(function(e){return!0===e.displayInLayerSwitcher&&e.isVisible()&&!1===e.isBase});vi(i,e);var r=fi(t.getLayerGroup());vi(r,e),r.forEach(function(t){vi(fi(t.layers),e)})}(e,this.map_))}}},{key:"orderLayers",value:function(e){var t=_i(e.children);t.sort(function(e,t){return t.dataset.order-e.dataset.order}),e.innerHTML="",t.forEach(function(t){return e.appendChild(t)})}},{key:"collapsedPlugin",value:function(e){e.target.parentElement.classList.contains("collapsed")?this.getImpl().removeRenderComplete():(this.render(),this.getImpl().registerEvent(this.map_))}},{key:"clickLayer",value:function(e){var t=this,i=e||window.event;if("m-layerswitcher-hsalllayers"===i.target.id)this.showHideAllLayers();else{var r=this.findLayer(i)[0];if(r){if(ui(r,i.target,this.order),function(e,t,i){var r=e.target.getAttribute("data-select-type");e.target.className.indexOf("m-layerswitcher-check")>-1&&"eye"===r&&e.target.classList.contains("m-layerswitcher-check")&&(!1!==t.isBase&&t.isVisible()||(t.setVisible(!t.isVisible()),i.render()))}(i,r,this),function(e,t,i){var r=i.getAttribute("data-select-type");if(i.className.indexOf("m-layerswitcher-check")>-1&&"radio"===r){var a=i.getAttribute("data-layer-id"),n=t.getLayers().filter(function(e){return!0===e.displayInLayerSwitcher&&!1===e.isBase});n.some(function(e){return e.idLayer===a})?n.forEach(function(e){e.idLayer===a?yi(e):hi(e)}):mi(e,t)}}(r,this.map_,i.target),function(e,t){if(e.target.className.indexOf("m-layerswitcher-icons-image")>-1){var i=e.target.parentElement.parentElement.parentElement.querySelector(".m-layerswitcher-legend");if("block"!==i.style.display){var r=t.getLegendURL();r instanceof Promise?r.then(function(e){-1===e.indexOf(ci)?i.querySelector("img").src=e:pi(t).then(function(t){i.querySelector("img").src=""!==t?t:e})}):r.indexOf(ci)>=0?pi(t).then(function(e){if("error legend"===e){var t=i.querySelector("img"),a=document.createElement("p"),n=document.createElement("span");n.classList.add("m-layerswitcher-icons-cancel"),a.classList.add("m-layerswitcher-legend-error"),a.appendChild(n);var s=document.createTextNode(v("legend_error"));a.appendChild(s),t.parentNode.insertBefore(a,t),IDEE.utils.isNullOrEmpty(t)||(t.src="")}else i.querySelector("img").src=""!==e?e:r}):i.querySelector("img").src=r,i.style.display="block"}else{var a=i.querySelector("img").parentElement.querySelector("p");IDEE.utils.isNullOrEmpty(a)||a.remove(),i.style.display="none"}}}(i,r,this.useProxy,this.statusProxy),function(e,t,i,r){if(r.target.className.indexOf("m-layerswitcher-icons-target")>-1){var a=t,n=e.type;if("WMS"===n)e.getMaxExtent(function(e){a.setBbox(e)});else if(di.includes(n)){var s=e.getMaxExtent();null===s?e.calculateMaxExtent?e.calculateMaxExtent().then(function(e){e.length>0?a.setBbox(e):a.setBbox(a.getExtent())}).catch(function(e){console.error(e)}):a.setBbox(a.getExtent()):a.setBbox(s)}else IDEE.dialog.info(v("exception.extent"),v("info"),i)}}(r,this.map_,this.order,i),gi(r,this.order,i),i.target.className.indexOf("m-layerswitcher-icons-info")>-1)if("OGCAPIFeatures"===r.type){var a,n="".concat(r.url).concat(r.name,"?f=json"),s="".concat(r.url).concat(r.name,"?f=html");IDEE.remote.get(n).then(function(e){var i={title:(a=JSON.parse(e.text)).title,abstract:a.description,hasMetadata:!0,metadata:s,isOgc:!0,translations:oi};if(r.getFeatures().length>0){t.pages_={total:0,actual:1,element:0};var n=[],o=r.getFeatures(),l=Object.keys(o[0].getAttributes());o.forEach(function(e){var t=Object.values(e.getAttributes());IDEE.utils.isNullOrEmpty(t)||n.push({properties:t})}),IDEE.utils.isUndefined(l)?i.attributes=n:(i.pages=t.pageResults_(n),i.allAttributes=n,i.attributes=!IDEE.utils.isNullOrEmpty(n)&&n.slice(t.pages_.element,t.pages_.element+t.numPages_)),i.headerAtt=l}if(t.renderInfo(i,"OGCAPIFeatures"),t.latestVars_=i,r instanceof IDEE.layer.Vector&&document.querySelector("#m-layerswitcher-next")){var c=document.querySelector("#m-layerswitcher-next");c.addEventListener("click",t.nextPage_.bind(t)),c.addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&c.click()});var d=document.querySelector("#m-layerswitcher-previous");d.addEventListener("click",t.previousPage_.bind(t)),d.addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&d.click()}),t.hasNext_(),t.hasPrevious_()}})}else if("WMS"===r.type||"WMTS"===r.type){var o={name:r.name,title:r.legend,abstract:r.capabilitiesMetadata.abstract,translations:oi};o.capabilities=this.addCapabilitiesInformation(r),r.capabilitiesMetadata.metadataURL&&(o.metadata=r.capabilitiesMetadata.metadataURL[0].OnlineResource),o.provider=this.informationProvider(r),IDEE.remote.get(o.capabilities).then(function(e){var i=e.text.split("<inspire_common:URL>")[1].split("<")[0].split("&amp;").join("&");!IDEE.utils.isNullOrEmpty(i)&&IDEE.utils.isUrl(i)&&(o.metadata_service=i,o.hasMetadata=!0),IDEE.utils.isNullOrEmpty(o.metadata)||!IDEE.utils.isUrl(o.metadata)?void 0!==o.metadata_service?t.infoDownloadCenter(o.metadata_service,o):t.renderInfo(o):(o.hasMetadata=!0,t.infoDownloadCenter(o.metadata,o))}).catch(function(e){t.renderInfo(o)})}else{var l=!0,c={name:r.name,title:r.legend,translations:li};if(r instanceof IDEE.layer.Vector){var d=r.getFeatures().length;c.numberFeatures=d;var u=r.getMaxExtent();if(c.extension=IDEE.utils.isNullOrEmpty(u)?u:u.toString().replaceAll(",",", "),d>0){this.pages_={total:0,actual:1,element:0};var p=[],h=r.getFeatures(),y=Object.keys(h[0].getAttributes());h.forEach(function(e){var t=Object.values(e.getAttributes());IDEE.utils.isNullOrEmpty(t)||p.push({properties:t})}),IDEE.utils.isUndefined(y)?c.attributes=p:(c.pages=this.pageResults_(p),c.allAttributes=p,c.attributes=!IDEE.utils.isNullOrEmpty(p)&&p.slice(this.pages_.element,this.pages_.element+this.numPages_)),c.headerAtt=y}}var m=r.type;if("MVT"===m||"TMS"===m||"XYZ"===m){l=!1;var f=r.url;f=f.replace(/\{z\}\/\{x\}\/\{(-?)y\}\/?.*$/,"metadata.json");var g=r.getMaxExtent();c.extension=IDEE.utils.isNullOrEmpty(g)?g:g.toString().replaceAll(",",", "),IDEE.remote.get(f).then(function(e){if(200===e.code){var i=JSON.parse(e.text),r={};i.id&&(r.id=i.id),i.attribution&&(r.attribution=i.attribution),i.description&&(r.description=i.description),void 0!==i.minzoom&&(r.minzoom=i.minzoom.toString()),void 0!==i.maxzoom&&(r.maxzoom=i.maxzoom.toString()),i.center&&(r.center=i.center.toString().replaceAll(",",", ")),Object.keys(r).length>0&&(c.others=r)}t.renderInfo(c,"Others")})}else if("OSM"===m||"MBTiles"===m){var b=r.getMaxExtent();c.extension=IDEE.utils.isNullOrEmpty(b)?b:b.toString().replaceAll(",",", ")}if(l&&(this.renderInfo(c,"Others"),this.latestVars_=c),r instanceof IDEE.layer.Vector){var w=function(){setTimeout(function(){document.querySelector("#m-layerswitcher-next")?document.querySelector("#m-layerswitcher-next")&&(t.latestVars_=c,document.querySelector("#m-layerswitcher-next").addEventListener("click",t.nextPage_.bind(t)),document.querySelector("#m-layerswitcher-previous").addEventListener("click",t.previousPage_.bind(t)),t.hasNext_(),t.hasPrevious_()):w()},1e3)};w()}}!function(e,t,i){e.target.className.indexOf("m-layerswitcher-icons-delete")>-1&&(t.getImpl().rootGroup?function(e){var t=e.getImpl().rootGroup;t.getLayers().forEach(function(i){i.idLayer===e.idLayer&&t.removeLayer(i)})}(t):i.removeLayers(t))}(i,r,this.map_),function(e,t,i){var r=e.target;if(r.classList.contains("m-layerswitcher-groupDisplay")){var a=i.getLayerGroup().find(function(e){return e.idLayer===t.idLayer}),n=r.parentElement.parentElement.parentElement.children[1];n.style.display="none"===n.style.display?"block":"none",r.classList.contains(Ht)?(r.classList.remove(Ht),r.classList.add(Wt),r.setAttribute("title",v("hide_group")),r.setAttribute("aria-label",v("hide_group")),a.display=!0):(r.classList.remove(Wt),r.classList.add(Ht),r.setAttribute("title",v("show_group")),r.setAttribute("aria-label",v("show_group")),a.display=!1)}}(i,r,this.map_)}}i.stopPropagation()}},{key:"pageResults_",value:function(e){return this.pages_.total=Math.ceil(e.length/this.numPages_),this.pages_}},{key:"nextPage_",value:function(){this.pages_.total>this.pages_.actual&&(this.pages_.actual+=1,this.pages_.element+=this.numPages_,this.updateTablePage_())}},{key:"previousPage_",value:function(){this.pages_.actual>1&&(this.pages_.actual-=1,this.pages_.element-=this.numPages_,this.updateTablePage_())}},{key:"updateTablePage_",value:function(){var e=document.querySelector("#m-layerswitcher-table tbody");e.innerHTML="",this.latestVars_.attributes=!IDEE.utils.isNullOrEmpty(this.latestVars_.allAttributes)&&this.latestVars_.allAttributes.slice(this.pages_.element,this.pages_.element+this.numPages_),this.latestVars_.attributes&&this.latestVars_.attributes.forEach(function(t){var i=document.createElement("tr");t.properties.forEach(function(e){var t=document.createElement("td");t.innerHTML=e,i.appendChild(t)}),e.appendChild(i)}),document.querySelector("#m-layerswitcher-pageinfo").innerText="Página ".concat(this.pages_.actual," de ").concat(this.pages_.total),this.hasNext_(),this.hasPrevious_()}},{key:"hasNext_",value:function(e){var t;IDEE.utils.isNullOrEmpty(e)||(t=e),IDEE.utils.isNullOrEmpty(t)&&(t=document),this.pages_.actual<this.pages_.total?t.querySelector("#m-layerswitcher-next").classList.remove("m-layerswitcher-hidden"):t.querySelector("#m-layerswitcher-next").classList.add("m-layerswitcher-hidden")}},{key:"hasPrevious_",value:function(e){var t;IDEE.utils.isNullOrEmpty(e)||(t=e),IDEE.utils.isNullOrEmpty(t)&&(t=document),this.pages_.actual<=this.pages_.total&&1!==this.pages_.actual?t.querySelector("#m-layerswitcher-previous").classList.remove("m-layerswitcher-hidden"):t.querySelector("#m-layerswitcher-previous").classList.add("m-layerswitcher-hidden")}},{key:"inputLayer",value:function(e){var t=this;if("radio"!==e.target.type){clearTimeout(this.inputLayerTimeID),this.getImpl().removeRenderComplete();var i=e||window.event;if(!IDEE.utils.isNullOrEmpty(i.target)){var r=this.findLayer(i);r.length>0&&(i.stopPropagation(),r[0].setOpacity(i.target.value))}this.inputLayerTimeID=setTimeout(function(){t.getImpl().registerEvent(t.map_)},500)}}},{key:"findLayer",value:function(e){var t=e.target.getAttribute("data-layer-id"),i=[];return IDEE.utils.isNullOrEmpty(t)||(i=Bt(this.map_).concat(this.overlayLayers).filter(function(e){return e.idLayer===t})),i}},{key:"renderInfo",value:function(e,t){var i,r=e;r.translations.previous=v("previous"),r.translations.next=v("next"),"OGCAPIFeatures"===t?(i=IDEE.template.compileSync(E(),{jsonp:!1,parseToHtml:!1,vars:r}),ei(".m-layerswitcher-info-cap p")):"Others"===t?(i=IDEE.template.compileSync(x(),{jsonp:!1,parseToHtml:!1,vars:r}),ei(".m-layerswitcher-info-cap p")):(i=IDEE.template.compileSync(b(),{jsonp:!1,parseToHtml:!1,vars:r}),ei(".m-layerswitcher-info-cap p")),IDEE.dialog.info(i,v("layer_info"),this.order),setTimeout(function(){document.querySelector("div.m-api-idee-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=v("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3"},10)}},{key:"addCapabilitiesInformation",value:function(e){return"WMS"===e.type?IDEE.utils.getWMSGetCapabilitiesUrl(e.url,e.version):"WMTS"===e.type&&IDEE.utils.getWMTSGetCapabilitiesUrl(e.url)}},{key:"informationProvider",value:function(e){if(IDEE.utils.isNullOrEmpty(e.capabilitiesMetadata.attribution))return!1;var t="";if("WMS"===e.type&&(t="".concat(e.capabilitiesMetadata.attribution.Title),void 0!==e.capabilitiesMetadata.attribution.OnlineResource&&(t+='<p><a class="m-layerswitcher-provider-link" href="'.concat(e.capabilitiesMetadata.attribution.OnlineResource,'" target="_blank">').concat(e.capabilitiesMetadata.attribution.OnlineResource,"</a></p>"))),"WMTS"===e.type){t="".concat(e.capabilitiesMetadata.attribution.ProviderName)+'<p><a class="m-layerswitcher-provider-link" href="'.concat(e.capabilitiesMetadata.attribution.ProviderSite,'" target="_blank">').concat(e.capabilitiesMetadata.attribution.ProviderSite,"</a></p>");var i=e.capabilitiesMetadata.attribution.ServiceContact;if(!IDEE.utils.isNullOrEmpty(i)&&!IDEE.utils.isNullOrEmpty(i.ContactInfo)){var r=i.ContactInfo.Address.ElectronicMailAddress;t+='<p><a class="m-layerswitcher-provider-link" href="mailto:'.concat(r,'">').concat(r,"</a></p>")}}return t}},{key:"infoDownloadCenter",value:function(e,t){var i=this;IDEE.remote.get(e).then(function(e){var r=e.text.split("<gmd:MD_DigitalTransferOptions>")[1].split("<gmd:URL>").filter(function(e){return e.indexOf("centrodedescargas")>-1&&-1===e.indexOf("atom")});if(r.length>0){var a=r[0].split("</gmd:URL>")[0].trim();t.downloadCenter=a}i.renderInfo(t)}).catch(function(e){i.renderInfo(t)})}},{key:"showHideAllLayers",value:function(){var e=this;this.statusShowHideAllLayers=!this.statusShowHideAllLayers,Bt(this.map_).concat(this.overlayLayers).forEach(function(t){t.setVisible(e.statusShowHideAllLayers)})}},{key:"showLoading",value:function(){var e=document.createElement("p");e.id="m-layerswitcher-loading",e.innerHTML='<span class="m-layerswitcher-icons-spinner"></span>',document.querySelector(".m-layerswitcher-search-panel").appendChild(e),document.querySelector(Vi).style.display="none",document.querySelector(Fi)&&(document.querySelector(Fi).style.display="none"),document.querySelector(ji)&&(document.querySelector(ji).style.display="none"),document.getElementById("m-layerswitcher-addservices-file-input")&&(document.getElementById("labelFileInput").style.display="none"),document.querySelector(Bi).style.display="none",this.loadingActive=!0}},{key:"removeLoading",value:function(){document.querySelector("#m-layerswitcher-loading")&&document.querySelector(Vi)&&(document.querySelector("#m-layerswitcher-loading").remove(),document.querySelector(Vi).style.display="inline",document.querySelector(Fi)&&(document.querySelector(Fi).style.display="inline"),document.querySelector(ji)&&(document.querySelector(ji).style.display=" inline-block"),document.getElementById("m-layerswitcher-addservices-file-input")&&(document.getElementById("labelFileInput").style.display="inline"),document.querySelector(Bi).style.display="inline",this.loadingActive=!1)}},{key:"readCapabilities",value:function(e){var t=this,i=document.querySelector(Ui),r=document.querySelector(Ri);e.preventDefault();var a=!1,n=!1;i.style.display="none";var s=r.value.trim().split("?")[0];if(this.removeContains(e),IDEE.utils.isNullOrEmpty(s))IDEE.dialog.error(v("exception.empty"),void 0,this.order);else if(IDEE.utils.isUrl(s))if(this.http&&!this.https?a=/^(http:)/.test(s):this.https&&!this.http?n=/^(https:)/.test(s):this.http&&this.https&&(a=!0,n=!0),!0===a||!0===n){this.showLoading();var o=s.indexOf(".pbf")>=0,l=s.indexOf(".json")>=0;if(o||l){var c=s,d="{z}/{x}/{y}.pbf";o&&(-1===s.indexOf("{z}/{x}/{y}")&&(d="{z}/{y}/{x}.pbf"),c=s.replace(d,"metadata.json")),s.indexOf("{z}/{x}/{-y}")>=0?this.printLayerModal(s,"tms"):s.indexOf(!s.indexOf(".pbf"))>=0?this.printLayerModal(s,"xyz"):IDEE.remote.get(c).then(function(e){if(l&&-1!==e.text.indexOf("sources")&&-1!==e.text.indexOf("version")&&-1!==e.text.indexOf("layers"))t.printLayerModal(s,"maplibre");else if(l&&e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0)t.printLayerModal(s,"geojson");else{var i,r=JSON.parse(e.text);IDEE.utils.isNullOrEmpty(r)?r={}:(IDEE.utils.isNullOrEmpty(r.json)||(r=JSON.parse(r.json)),i=c.substring(0,c.lastIndexOf("/")+1).concat(d));var a=r.vector_layers||[],n=r.tileurl||r.tiles||i||s;IDEE.utils.isString(n)&&(n=[n]),a=a.map(function(e){return{name:e.id}}),n[0].indexOf("{z}/{x}/{-y}")>=0?t.printLayerModal(n[0],"tms"):n[0].indexOf("{z}/{x}/{y}")>=0&&-1===n[0].indexOf(".pbf")?t.printLayerModal(n[0],"xyz"):t.printLayerModal(n[0],"mvt",a)}})}else s.indexOf(".tif")>=0?this.printLayerModal(s,"geotiff"):s.indexOf("{z}/{x}/{-y}")>=0?this.printLayerModal(s,"tms"):s.indexOf("{z}/{x}/{y}")>=0&&s.indexOf("openstreetmap")>=0?this.printLayerModal(s,"osm"):s.indexOf("{z}/{x}/{y}")>=0?this.printLayerModal(s,"xyz"):new Promise(function(e,t){var i=setTimeout(function(){return t()},15e3);IDEE.remote.get(IDEE.utils.getWMTSGetCapabilitiesUrl(s)).then(function(t){clearTimeout(i),e(t)})}).then(function(e){if(e.text&&!IDEE.utils.isNullOrEmpty(e.text)&&e.text.indexOf("<TileMatrixSetLink>")>=0&&e.text.indexOf('Operation name="GetTile"')>=0){var i=(new IDEE.impl.format.WMTSCapabilities).read(e.xml);t.serviceCapabilities=i.capabilities||{};var a=IDEE.impl.util.wmtscapabilities.getLayers(i.capabilities,s,t.map_.getProjection().code);t.capabilities=t.filterResults(a),t.showResults()}else{var n=new Promise(function(e,t){var i=setTimeout(function(){return t()},15e3);IDEE.remote.get(IDEE.utils.getWMSGetCapabilitiesUrl(s,"1.3.0")).then(function(t){clearTimeout(i),e(t)})}),o=new Promise(function(e,t){var i=setTimeout(function(){return t()},15e3),r=s;r=IDEE.utils.addParameters(s,"request=GetCapabilities"),r=IDEE.utils.addParameters(r,"service=WFS"),r=IDEE.utils.addParameters(r,{version:"1.3.0"}),IDEE.remote.get(r).then(function(t){clearTimeout(i),e(t)})});Promise.all([n,o]).then(function(e){var i=!1,a=!1;if(!IDEE.utils.isNullOrEmpty(e[0].text)&&-1===e[0].text.indexOf("<TileMatrixSetLink>")&&e[0].text.indexOf("<GetMap>")>=0&&(i=!0),!IDEE.utils.isNullOrEmpty(e[1].text)&&-1===e[1].text.indexOf("<TileMatrixSetLink>")&&e[1].text.indexOf('Operation name="GetFeature"')>=0&&(a=!0),i||a)try{if(i){var n=(new IDEE.impl.format.WMSCapabilities).read(e[0].xml||(new DOMParser).parseFromString(e[0].text,"text/xml"));t.serviceCapabilities=n.Service||{};var o=new IDEE.impl.GetCapabilities(n,s,t.map_.getProjection().code);t.capabilities=t.filterResults(o.getLayers()),t.capabilities.forEach(function(e){try{t.getParents(n,e)}catch(e){}})}var l;a&&(l=t.readWFSCapabilities(e[1])),t.showResults(l)}catch(e){IDEE.dialog.error(v("exception.capabilities"),void 0,t.order),t.removeLoading()}else t.checkIfOGCAPIFeatures(s).then(function(e){if(!0===e)t.checkIfOGCAPICollection(s).then(function(e){e?t.printOGCModal(s):(IDEE.dialog.error(v("exception.ogcfeatures"),void 0,t.order),t.removeLoading())});else{var i=s.includes(".")?s.substring(s.lastIndexOf(".")+1,s.length):"";["zip","gpx","gml"].includes(i)?t.openFileFromUrl(s,i):IDEE.remote.get(s).then(function(e){if(IDEE.utils.isNullOrEmpty(e.text))IDEE.remote.get(r.value.trim()).then(function(e){!IDEE.utils.isNullOrEmpty(e.text)&&e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0?t.printLayerModal(r.value.trim(),"geojson"):(IDEE.dialog.error(v("exception.capabilities"),void 0,t.order),t.removeLoading())});else if(e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0)t.printLayerModal(s,"geojson");else if(e.text.indexOf("<kml ")>=0){var i=(new DOMParser).parseFromString(e.text,"text/xml").getElementsByTagName("Folder"),a=-1,n=Array.from(i).map(function(e){return a+=1,{name:e.querySelector(":scope > name")?e.querySelector(":scope > name").textContent.trim():"Layer__".concat(a)}});t.printLayerModal(s,"kml",n)}})}})}).catch(function(e){IDEE.dialog.error(v("exception.capabilities"),void 0,t.order),t.removeLoading()})}}).catch(function(e){IDEE.dialog.error(v("exception.capabilities"),void 0,t.order),t.removeLoading()})}else{var u;this.http?u=v("exception.only_http"):this.https?u=v("exception.only_https"):this.http||this.https||(u=v("exception.no_http_https")),IDEE.dialog.error(u,void 0,this.order)}else IDEE.dialog.error(v("exception.valid_url"),void 0,this.order)}},{key:"openAddServices",value:function(){var e=this,t=this.precharged,i=void 0!==t.groups&&t.groups.length>0||void 0!==t.services&&t.services.length>0,r=this.codsiActive,a=IDEE.template.compileSync(M(),{jsonp:!0,parseToHtml:!1,vars:{precharged:t,hasPrecharged:i,codsiActive:r,accept:".kml, .zip, .gpx, .geojson, .gml, .json",translations:{url_service:v("url_service"),query:v("query"),group:v("group"),loaded_services:v("loaded_services"),clean:v("clean"),availables:v("availables"),codsi_services:v("codsi_services"),filter_results:v("filter_results"),clean_filter:v("clean_filter"),filter_text:v("filter_text"),upload_file:v("upload_file")}}});IDEE.dialog.info(a,v("load_ext_services"),this.order),setTimeout(function(){e.changeClodeButtonModal(),e.addEventSuggestions(),e.addEventCODSI(),e.addEventSearch(),e.addEventFileUpload(),e.addGroupLayersEvent()},10),ei("#m-layerswitcher-addservices-search-input")}},{key:"changeClodeButtonModal",value:function(){document.querySelector("div.m-dialog.info div.m-button > button").innerHTML=v("close")}},{key:"addGroupLayersEvent",value:function(){var e=this,t=document.querySelector(ji),i=document.querySelector(Ui),r=document.querySelector(".input-container");t.addEventListener("click",function(t){e.printLayerModal("","layerGroup"),i.style.display="none",r.style.display="none"})}},{key:"addEventSearch",value:function(){var e=this,t=document.querySelector(Vi),i=document.querySelector(Ri);t.addEventListener("click",function(t){e.filterName=void 0,e.readCapabilities(t)}),i.addEventListener("keydown",function(t){13===t.keyCode&&(e.filterName=void 0,e.readCapabilities(t))})}},{key:"addEventFileUpload",value:function(){var e=this,t=document.querySelector("#m-layerswitcher-addservices-file-input");t.addEventListener("change",function(){return e.changeFile(t)})}},{key:"changeFile",value:function(e){IDEE.loadFiles.addFileToMap(this.map_,e.files[0]),e.value="",document.querySelector("div.m-dialog.info div.m-button > button").click()}},{key:"openFileFromUrl",value:function(e,t){var i=this;if(IDEE.utils.isUrl(e)){var r=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));["zip","kml","gpx","geojson","gml","json"].includes(t)>-1?"zip"===t?this.downloadShp(e,r):IDEE.remote.get(e).then(function(e){var a=e.text;IDEE.utils.loadFeaturesFromSource(i.map_,a,r,t),document.querySelector("div.m-dialog.info div.m-button > button").click()}):IDEE.dialog.error(v("exception.url_not_valid"))}}},{key:"downloadShp",value:function(e,t){var i=this;window.fetch(e).then(function(e){return e.ok?e.blob():(IDEE.dialog.error(v("exception.url_not_valid")),null)}).then(function(e){e?e.arrayBuffer().then(function(e){IDEE.utils.loadFeaturesFromSource(i.map_,e,t,"zip"),document.querySelector("div.m-dialog.info div.m-button > button").click()}):IDEE.dialog.error(v("exception.url_not_valid"))}).catch(function(e){IDEE.dialog.error(v("exception.url_not_valid"))})}},{key:"addEventSuggestions",value:function(){var e=this,t=document.querySelector(Bi);null!==t&&(t.addEventListener("click",function(t){return e.showSuggestions(t)}),t.addEventListener("keydown",function(t){return 13===t.keyCode&&e.showSuggestions(t)})),document.querySelectorAll(".m-layerswitcher-suggestion-caret").forEach(function(e){e.addEventListener("click",function(){e.parentElement.querySelector(".m-layerswitcher-suggestion-group").classList.toggle("active"),e.classList.toggle("m-layerswitcher-suggestion-caret-close")})}),document.querySelectorAll("#m-layerswitcher-addservices-suggestions .m-layerswitcher-suggestion").forEach(function(t){t.addEventListener("click",function(t){return e.loadSuggestion(t)})})}},{key:"showSuggestions",value:function(){var e=document.querySelector(zi),t=document.querySelector(Gi),i=document.querySelector(Hi),r=document.querySelector(Ui);document.querySelector(Wi).innerHTML="",null!==e&&(e.style.display="none"),null!==t&&(t.style.display="none"),i.innerHTML="",r.style.display="block"}},{key:"readWFSCapabilities",value:function(e){var t=[],i=[],r=e.text.split('<ows:Operation name="GetFeature">')[1].split("</ows:Operation>")[0].split('<ows:Parameter name="outputFormat">')[1].split("</ows:Parameter>")[0],a="";(a=r.indexOf("<ows:AllowedValues>")>-1?r.split("<ows:AllowedValues>")[1].split("</ows:AllowedValues>")[0]:r).indexOf("<ows:Value>")>-1&&a.split("<ows:Value>").forEach(function(e){e.indexOf("</ows:Value>")>-1&&i.push(e.split("</ows:Value>")[0].trim())});var n=i.includes("json")?"application/json":i[0],s=e.text.split("<FeatureTypeList>")[1].split("</FeatureTypeList>")[0];s.indexOf("<FeatureType>")>-1?s.split("<FeatureType>").forEach(function(e){if(e.indexOf("</Name>")>-1){var i=[];e.indexOf("<OutputFormats>")>-1&&(i=e.split("<OutputFormats>")[1].split("</OutputFormats>")[0].split("<Format>").slice(1).map(function(e){return e.split("</Format>")[0].trim()})),t.push({name:e.split("</Name>")[0].split(">")[1].trim(),title:e.split("</Title>")[0].split("<Title>")[1].trim(),formats:0===i.length?[n]:i})}}):s.indexOf("<FeatureType")>-1&&s.split("<FeatureType").forEach(function(e){if(e.indexOf("</Name>")>-1){var i=[];e.indexOf("<OutputFormats>")>-1&&(i=e.split("<OutputFormats>")[1].split("</OutputFormats>")[0].split("<Format>").slice(1).map(function(e){return e.split("</Format>")[0].trim()})),t.push({name:e.split("</Name>")[0].split("<Name>")[1].trim(),title:e.split("</Title>")[0].split("<Title>")[1].trim(),formats:0===i.length?[n]:i})}});var o={},l=!1;try{o.title=e.text.split("<ows:Title>")[1].split("</ows:Title>")[0],l=!0}catch(e){l=l||!1}try{o.abstract=e.text.split("<ows:Abstract>")[1].split("</ows:Abstract>")[0],l=!0}catch(e){l=l||!1}try{o.accessConstraints=e.text.split("<ows:AccessConstraints>")[1].split("</ows:AccessConstraints>")[0],l=!0}catch(e){l=l||!1}return{services:t,capabilities:o,hasCapabilities:l}}},{key:"removeContains",value:function(e){e.preventDefault();var t=document.querySelector(zi),i=document.querySelector(Gi);null!==i&&(i.style.display="none"),null!==document.querySelector(Wi)&&(document.querySelector(Wi).style.display="none"),null!==t&&(t.style.display="none"),document.querySelector(Hi).innerHTML=""}},{key:"filterResults",value:function(e){var t=this,i=[],r=[],a=[];return void 0===this.filterName?e.forEach(function(e){i.push(e),r.push(e.name)}):"none"===this.filterName?(void 0!==this.precharged.services&&this.precharged.services.length>0&&(a=a.concat(this.precharged.services)),void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach(function(e){void 0!==e.services&&e.services.length>0&&(a=a.concat(e.services))}),e.forEach(function(e){var n=!1;a.forEach(function(a){a.type===e.type&&t.checkUrls(a.url,e.url)&&((void 0!==a.white_list&&a.white_list.length>0&&a.white_list.indexOf(e.name)>-1&&-1===r.indexOf(e.name)||void 0===a.white_list&&-1===r.indexOf(e.name))&&(i.push(e),r.push(e.name)),n=!0)}),n||(i.push(e),r.push(e.name))})):void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach(function(a){void 0!==a.services&&a.services.length>0&&a.name===t.filterName&&e.forEach(function(e){var n=!1;a.services.forEach(function(a){a.type===e.type&&t.checkUrls(a.url,e.url)&&((void 0!==a.white_list&&a.white_list.length>0&&a.white_list.indexOf(e.name)>-1&&-1===r.indexOf(e.name)||void 0===a.white_list&&-1===r.indexOf(e.name))&&(i.push(e),r.push(e.name)),n=!0)}),n||(i.push(e),r.push(e.name))})}),i}},{key:"showResults",value:function(e){var t=this;this.removeLoading();var i=[],r="WMS";IDEE.utils.isUndefined(this.capabilities)||this.capabilities.forEach(function(e){var t=e.getImpl();t.abstract=e.capabilitiesMetadata.abstract.trim(),r=e.type,i.push(t)});var a=document.querySelector(Hi);if(i.length>0||!IDEE.utils.isUndefined(e)){var n={},s=!0;if("WMTS"===r){var o=this.serviceCapabilities.ServiceIdentification,l=this.serviceCapabilities.ServiceProvider;if(void 0!==o&&void 0!==o.Title&&(n.title=o.Title.trim()),void 0!==o&&void 0!==o.Abstract&&(n.abstract=o.Abstract.trim()),void 0!==o&&void 0!==o.AccessConstraints&&(n.accessConstraints=o.AccessConstraints.trim()),void 0!==l){var c="".concat(l.ProviderName,'<p><a class="m-layerswitcher-provider-link" href="').concat(l.ProviderSite,'" target="_blank">').concat(l.ProviderSite,"</a></p>"),d=l.ServiceContact.ContactInfo;if(!IDEE.utils.isNullOrEmpty(l.ServiceContact)&&!IDEE.utils.isNullOrEmpty(d)){var u=d.Address.ElectronicMailAddress;c+='<p><a class="m-layerswitcher-provider-link" href="mailto:'.concat(u,'">').concat(u,"</a></p>")}n.contact=c}}else if(IDEE.utils.isUndefined(this.serviceCapabilities))s=!1;else{var p=this.serviceCapabilities.ContactInformation;void 0!==this.serviceCapabilities.Title&&(n.title=this.serviceCapabilities.Title.trim()),void 0!==this.serviceCapabilities.Abstract&&(n.abstract=this.serviceCapabilities.Abstract.trim()),void 0!==this.serviceCapabilities.AccessConstraints&&(n.accessConstraints=this.serviceCapabilities.AccessConstraints.trim()),void 0!==p&&void 0!==p.ContactPersonPrimary&&void 0!==p.ContactPersonPrimary.ContactOrganization&&(n.contact=p.ContactPersonPrimary.ContactOrganization.trim())}var h={result:i,serviceCapabilities:n,type:r,isWFS:!1,showgeneral:s,translations:{layers:v("layers"),add:v("add"),title:v("title"),abstract:v("abstract"),responsible:v("responsible"),access_constraints:v("access_constraints"),show_service_info:v("show_service_info"),addAllLayers:v("addAllLayers"),add_service:v("add_service")}};IDEE.utils.isUndefined(e)||(h.layersWFS=e.services,h.serviceCapabilitieswfs=e.capabilities,h.isWFS=!0);var y=IDEE.template.compileSync(C(),{vars:h});a.innerHTML=y.innerHTML,Ut(this.map_);for(var m=a.querySelectorAll("span.m-check-layerswitcher-addservices"),f=0;f<m.length;f+=1)m[f].addEventListener("click",function(e){return t.registerCheck(e)});for(var g=a.querySelectorAll("span.m-check-layerswitcher-addservices-wfs"),b=0;b<g.length;b+=1)g[b].addEventListener("click",function(e){return t.registerCheckWFS(e)});for(var w=a.querySelectorAll("#m-layerswitcher-all tbody tr td.m-layerswitcher-table-layer-name"),E=0;E<w.length;E+=1)w[E].addEventListener("click",function(e){return t.registerCheckFromName(e)});for(var _=a.querySelectorAll("#m-layerswitcher-wfs tbody tr td.m-layerswitcher-table-layer-name"),x=0;x<_.length;x+=1)_[x].addEventListener("click",function(e){return t.registerCheckFromNameWFS(e)});a.querySelectorAll(".m-layerswitcher-table-results .m-layerswitcher-table-container table tbody tr td span").forEach(function(e){return e.addEventListener("keydown",function(e){return 13===e.keyCode&&t.registerCheckFromName(e)})});var S=a.querySelector("#m-layerswitcher-addservices-selectall");IDEE.utils.isNull(S)||S.addEventListener("click",function(e){return t.registerCheck(e)});var L=a.querySelector("#m-layerswitcher-addservices-selectall-wfs");IDEE.utils.isNull(L)||L.addEventListener("click",function(e){return t.registerCheckWFS(e)}),a.querySelector(".m-layerswitcher-addservices-add").addEventListener("click",function(e){return t.addSelected_WMS_WMTS_WFS(e)});var I=a.querySelector(".m-layerswitcher-show-capabilities");IDEE.utils.isNull(I)||I.addEventListener("click",function(){var e=a.querySelector(".m-layerswitcher-capabilities-container");"block"!==e.style.display?(e.style.display="block",I.innerHTML='<span class="m-layerswitcher-icons-colapsar"></span>&nbsp;'.concat(v("hide_service_info"))):(e.style.display="none",I.innerHTML='<span class="m-layerswitcher-icons-desplegar"></span>&nbsp;'.concat(v("show_service_info")))});var D=a.querySelector(".m-layerswitcher-show-capabilities-wfs");IDEE.utils.isNull(D)||D.addEventListener("click",function(){var e=a.querySelector(".m-layerswitcher-capabilities-container-wfs");"block"!==e.style.display?(e.style.display="block",D.innerHTML='<span class="m-layerswitcher-icons-colapsar"></span>&nbsp;'.concat(v("hide_service_info"))):(e.style.display="none",D.innerHTML='<span class="m-layerswitcher-icons-desplegar"></span>&nbsp;'.concat(v("show_service_info")))})}else a.innerHTML='<p class="m-layerswitcher-noresults">'.concat(v("exception.no_results"),"</p>");document.querySelector(Hi).style.display="block"}},{key:"checkIfOGCAPIFeatures",value:function(e){return IDEE.remote.get("".concat(e,"?f=json")).then(function(e){var t=!1;return IDEE.utils.isNullOrEmpty(e)||IDEE.utils.isNullOrEmpty(e.text)||-1===e.text.indexOf("collections")||(t=!0),t}).catch(function(){return!1})}},{key:"checkIfOGCAPICollection",value:function(e){var t="".concat(e.endsWith("/")?e:"".concat(e,"/"),"collections?f=json");return IDEE.remote.get(t).then(function(t){var i=!1;if(!IDEE.utils.isNullOrEmpty(t)&&!IDEE.utils.isNullOrEmpty(t.text)){var r=JSON.parse(t.text);if(!(r.collections.length>0&&"feature"===r.collections[0].itemType)){var a="".concat(e.endsWith("/")?e:"".concat(e,"/"),"collections/").concat(r.collections[0].id,"/items?f=json&limit=1");return IDEE.remote.get(a).then(function(e){return"FeatureCollection"===JSON.parse(e.text).type&&(i=!0),i})}i=!0}return i}).catch(function(){return!1})}},{key:"registerCheck",value:function(e){var t=e||window.event;if(!IDEE.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-layerswitcher-addservices")){var i=document.querySelector(Hi).querySelectorAll(".m-check-layerswitcher-addservices.m-layerswitcher-icons-check").length;i+=t.target.classList.contains("m-layerswitcher-icons-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("m-layerswitcher-icons-check"),t.target.classList.toggle("m-layerswitcher-icons-check-seleccionado"),i>0?(this.stateSelectAll=!1,document.querySelector("#m-layerswitcher-addservices-selectall").classList.remove("m-layerswitcher-icons-check-seleccionado"),document.querySelector("#m-layerswitcher-addservices-selectall").classList.add("m-layerswitcher-icons-check")):0===i&&(this.stateSelectAll=!0,document.querySelector("#m-layerswitcher-addservices-selectall").classList.remove("m-layerswitcher-icons-check"),document.querySelector("#m-layerswitcher-addservices-selectall").classList.add("m-layerswitcher-icons-check-seleccionado"))}else IDEE.utils.isNullOrEmpty(t.target)||"m-layerswitcher-addservices-selectall"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("m-layerswitcher-icons-check-seleccionado"),t.target.classList.add("m-layerswitcher-icons-check"),this.unSelect(),this.stateSelectAll=!1):(t.target.classList.remove("m-layerswitcher-icons-check"),t.target.classList.add("m-layerswitcher-icons-check-seleccionado"),this.select(),this.stateSelectAll=!0))}},{key:"registerCheckWFS",value:function(e){var t=e||window.event;if(!IDEE.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-layerswitcher-addservices-wfs")){var i=document.querySelector(Hi).querySelectorAll(".m-check-layerswitcher-addservices-wfs.m-layerswitcher-icons-check").length;i+=t.target.classList.contains("m-layerswitcher-icons-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("m-layerswitcher-icons-check"),t.target.classList.toggle("m-layerswitcher-icons-check-seleccionado"),i>0?(this.stateSelectAll=!1,document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.remove("m-layerswitcher-icons-check-seleccionado"),document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.add("m-layerswitcher-icons-check")):0===i&&(this.stateSelectAll=!0,document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.remove("m-layerswitcher-icons-check"),document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.add("m-layerswitcher-icons-check-seleccionado"))}else IDEE.utils.isNullOrEmpty(t.target)||"m-layerswitcher-addservices-selectall-wfs"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("m-layerswitcher-icons-check-seleccionado"),t.target.classList.add("m-layerswitcher-icons-check"),this.unSelectWFS(),this.stateSelectAll=!1):(t.target.classList.remove("m-layerswitcher-icons-check"),t.target.classList.add("m-layerswitcher-icons-check-seleccionado"),this.selectWFS(),this.stateSelectAll=!0))}},{key:"registerCheckFromName",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-layerswitcher-addservices").click()}},{key:"registerCheckFromNameWFS",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-layerswitcher-addservices-wfs").click()}},{key:"addLayersWFS",value:function(e){var t=this,i=document.querySelector(Ri).value.trim();e.forEach(function(e){var r=e.id.split(":"),a=e.getAttribute("format");if("m-layerswitcher-addservices-selectall-wfs"!==r[0]){var n=r[0],s=r[1],o={type:"WFS",url:i,legend:s,extact:!0,format:a||"application/json"};IDEE.utils.isUndefined(s)?o.name=n:(o.name=s,o.namespace=n),t.addLayer(o)}})}},{key:"addSelected_WMS_WMTS_WFS",value:function(e){var t=this;e.preventDefault();var i=[],r=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-all .m-layerswitcher-icons-check-seleccionado"),a=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check-seleccionado");if(0===r.length&&0===a.length)IDEE.dialog.error(v("exception.select_layer"),void 0,this.order);else{for(var n=0;n<r.length;n+=1)for(var s=function(e){var a=t.capabilities[e].name;if(r[n].id===a||r[n].name===a){var s=parseInt(t.serviceCapabilities.MaxWidth,10),o=!Number.isNaN(s)&&s<4096,l=void 0!==t.serviceCapabilities.Title&&t.serviceCapabilities.Title.toLowerCase().indexOf("idecanarias")>-1;(t.capabilities[e].url.indexOf("//ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx")>-1||l)&&(t.capabilities[e].version="1.1.1"),t.capabilities[e].tiled="WMTS"===t.capabilities[e].type||o||l,t.capabilities[e].options.origen=t.capabilities[e].type;var c=t.capabilities[e].getLegendURL(),d=t.capabilities[e].capabilitiesMetadata;if((c.indexOf("GetLegendGraphic")>-1||c.indexOf("https://componentes.idee.es/estaticos/imagenes/leyenda/legend-default.png")>-1)&&void 0!==d&&d.style.length>0){if(void 0!==d.style[0].LegendURL&&d.style[0].LegendURL.length>0){var u=d.style[0].LegendURL[0].OnlineResource;null!=u&&t.capabilities[e].setLegendURL(u)}"WMTS"===t.capabilities[e].type&&void 0!==d.style&&d.style.length>0&&d.style.forEach(function(i){if(!0===i.isDefault&&void 0!==i.LegendURL&&i.LegendURL.length>0){var r=i.LegendURL[0].href;t.capabilities[e].setLegendURL(r)}})}i.push(t.capabilities[e])}},o=0;o<this.capabilities.length;o+=1)s(o);a.length>0&&this.addLayersWFS(a),i.reverse();var l=this.useAttributions_?function(e){return e.map(function(e){var t=e,i=t.capabilitiesMetadata.attribution;if(void 0!==i){var r=i.Title,a=i.OnlineResource,n=i.ProviderName,s=i.ProviderSite;return t.attribution={name:r||n,url:a||s,nameLayer:t.name,id:window.crypto.randomUUID()},t}return t})}(i):i;l.forEach(function(e){return t.addLayer({existingLayer:e})}),document.querySelector("div.m-dialog.info div.m-button > button").click()}}},{key:"unSelect",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-all tbody span.m-layerswitcher-icons-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check-seleccionado"),e[t].classList.add("m-layerswitcher-icons-check")}},{key:"select",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-all tbody span"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check"),e[t].classList.add("m-layerswitcher-icons-check-seleccionado")}},{key:"unSelectWFS",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check-seleccionado"),e[t].classList.add("m-layerswitcher-icons-check")}},{key:"selectWFS",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check"),e[t].classList.add("m-layerswitcher-icons-check-seleccionado")}},{key:"loadSuggestion",value:function(e){var t=e.target.getAttribute("data-link");try{var i=e.target.parentElement.parentElement.parentElement,r=i.querySelector(".m-layerswitcher-suggestion-caret").innerText;this.filterName=r,"tbody"===i.localName&&(this.filterName="none")}catch(e){}document.querySelector(Ri).value=t,this.readCapabilities(e)}},{key:"checkUrls",value:function(e,t){return e===t||e.indexOf(t)>-1||t.indexOf(e)>-1}},{key:"printLayerModal",value:function(e,t,i){var r=this,a=IDEE.template.compileSync(q(),{jsonp:!0,parseToHtml:!1,vars:{type:t,isMVT:"mvt"===t,layers:i,translations:{add_btn:v("add_btn"),legend:v("legend"),name:v("name"),data_layer:v("data_layer"),layers:v("layers"),addAllLayers:v("addAllLayers"),add_service:v("add_service"),separatedby:v("separatedby"),placeHolderLegend:v("placeHolderLegend")}}});if(document.querySelector(Wi).outerHTML=a,"mvt"===t||"kml"===t){var n=document.querySelector("#m-layerswitcher-addservices-selectall");if(!IDEE.utils.isNullOrEmpty(n)){n.addEventListener("click",function(e){return r.registerCheck(e)});for(var s=document.querySelectorAll("span.m-check-layerswitcher-addservices"),o=0;o<s.length;o+=1)s[o].addEventListener("click",function(e){return r.registerCheck(e)})}}Ut(this.map_),document.querySelector("#m-layerswitcher-layer-button").addEventListener("click",function(){var i=Math.floor(9e3*Math.random())+1e3,a=document.querySelector("#m-layerswitcher-layer-name"),n=null;n=IDEE.utils.isNullOrEmpty(n)?"layer_".concat(i):n.value||"layer_".concat(i);var s=document.querySelector("#m-layerswitcher-layer-legend").value||n||"layer_".concat(i),o=document.querySelector("#m-layerswitcher-layer-matrixset");IDEE.utils.isNullOrEmpty(o)||(o=o.value||"EPSG:3857"),r.addLayer({name:null===a?s:n,type:t,legend:s,url:e,matrixSet:o}),document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))}),this.removeLoading()}},{key:"addLayer",value:function(e){var t=e.name,i=e.type,r=e.legend,a=e.url,n=e.format,s=e.matrixSet,o=e.OGCAPIFeatures,l=e.namespace,c=e.existingLayer,d=null;if("osm"===i)d=new IDEE.layer.OSM({name:t,legend:r,isBase:!1,url:a,matrixSet:s});else if("geojson"===i)d=new IDEE.layer.GeoJSON({extract:!0,name:t,legend:r,url:a});else if("tms"===i)d=new IDEE.layer.TMS({name:t,legend:r,url:a});else if("xyz"===i)d=new IDEE.layer.XYZ({name:t,legend:r,url:a});else if("mvt"===i){var u=document.querySelectorAll("#m-layerswitcher-addservices-results .m-layerswitcher-icons-check-seleccionado"),p=[];u.forEach(function(e){p.push(e.id)});var h=document.querySelector("#m-layerswitcher-layer-name");IDEE.utils.isNullOrEmpty(h)||-1!==h.value.indexOf("layer_")||(p=h.value.split(","));var y={name:t,legend:r,url:a,projection:s,extract:!0};IDEE.utils.isNullOrEmpty(p)||(y.layers=p),d=new IDEE.layer.MVT(y)}else if("kml"===i){var m=document.querySelectorAll("#m-layerswitcher-addservices-results .m-layerswitcher-icons-check-seleccionado"),f=[];m.forEach(function(e){f.push(e.id)});var v={name:t,legend:r,url:a,extract:!0};IDEE.utils.isNullOrEmpty(f)||(v.layers=f),d=new IDEE.layer.KML(v)}else"geotiff"===i?d=new IDEE.layer.GeoTIFF({name:t,legend:r,url:a}):"maplibre"===i?d=new IDEE.layer.MapLibre({name:t,legend:r,url:a,extract:!0}):"layerGroup"===i?d=new IDEE.layer.LayerGroup({name:t,legend:r}):"OGCAPIFeatures"===i?(d=new IDEE.layer.OGCAPIFeatures(o)).setZIndex(d.getZIndex()+8):"WFS"===i?d=new IDEE.layer.WFS({name:t,namespace:l,legend:r,url:a,extract:!0},{describeFeatureTypeOutputFormat:"geojson",getFeatureOutputFormat:n}):c&&(d=c);var g,b,w=(g=this.map_,b=document.querySelector(".m-layerswitcher-groups-fields"),g.getLayerGroup().find(function(e){return e.getImpl().getLayer().ol_uid===b.value}));w?(w.addLayers(d),d.setZIndex(w.getZIndex())):this.map_.addLayers(d)}},{key:"printOGCModal",value:function(e,t,i,r,a,n,s){var o=this,l=e.trim();if(IDEE.utils.isUrl(l)){document.querySelector(Ri).value=e;var c="".concat(l.endsWith("/")?l:"".concat(l,"/"),"collections?f=json");IDEE.remote.get(c).then(function(c){var d=JSON.parse(c.text).collections;IDEE.utils.isNullOrEmpty(a)&&(a=void 0,n=void 0,s=void 0);var u=IDEE.template.compileSync(N(),{jsonp:!0,parseToHtml:!1,vars:{layers:d,selectedLayer:t,limit:i,bbox:r,summary:a,filterByID:n,filterByOtherFilters:s,prevID:void 0,translations:{select_service:v("select_service"),amount_results:v("amount_results"),amount_results_2:v("amount_results_2"),bbox_select:v("bbox-select"),other_filters:v("other_filters"),id_filter:v("id_filter"),warning:v("warning"),add_btn:v("add_btn"),custom_query_btn:v("custom_query_btn"),filters:v("filters"),check_results:v("check_results")}}});o.removeLoading(),document.querySelector("#m-layerswitcher-ogcCContainer").outerHTML=u,Ut(o.map_);var p=document.querySelector('input[name="m-layerswitcher-ogc-filter"][value="id"]'),h=document.querySelector('input[name="m-layerswitcher-ogc-filter"][value="others"]');o.setOnClickRadioBtn(p,h),o.setOnChanges(a),o.setOnClickCloseBtn(),o.setOnClickersFiltersButtons(a,l,p,h,d,e,n,s)}).catch(function(e){l="",IDEE.dialog.error(v("exception.error_ogc"),void 0,o.order)})}}},{key:"setOnClickRadioBtn",value:function(e,t){e.addEventListener("click",function(){document.querySelector("#m-layerswitcher-ogc-other-filters").style.display="none",document.querySelector("#m-layerswitcher-ogc-filter-id").style.display="block",document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}),t.addEventListener("click",function(){document.querySelector("#m-layerswitcher-ogc-other-filters").style.display="block",document.querySelector("#m-layerswitcher-ogc-filter-id").style.display="none",document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})}},{key:"setOnChanges",value:function(e){document.querySelector("#m-layerswitcher-ogc-search-form-ID").addEventListener("change",function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}),document.querySelector("#m-layerswitcher-ogc-limit-items").addEventListener("change",function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}),document.querySelector("#m-layerswitcher-ogc-search-bbox").addEventListener("change",function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}),document.querySelector("#m-layerswitcher-ogc-vectors-select").addEventListener("change",function(){var e=document.querySelector("#m-layerswitcher-ogc-summary");null!==e&&e.remove(),document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})}},{key:"setOnClickCloseBtn",value:function(){var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=v("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.addEventListener("click",function(){try{document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))}catch(e){}})}},{key:"setOnClickersFiltersButtons",value:function(e,t,i,r,a,n,s,o){var l,c,d,u=this,p=document.querySelector("#m-layerswitcher-ogc-vectors-select").value,h=document.querySelector("#m-layerswitcher-ogcCContainer #m-layerswitcher-ogc-select-button"),y=document.querySelector("#m-layerswitcher-ogcCContainer #m-layerswitcher-ogc-check-button"),m=document.querySelector("#m-layerswitcher-ogc-custom-query-button");h.addEventListener("click",function(){p===v("select_service")?IDEE.dialog.error(v("no_results"),void 0,u.order):(d=u.getProperties(p,e),u.addLayer({OGCAPIFeatures:d,type:"OGCAPIFeatures"}),document.querySelector("div.m-dialog.info div.m-button > button").click())}),y.addEventListener("click",function(){p===v("select_service")?IDEE.dialog.error(v("no_results"),void 0,u.order):(d=u.getProperties(p,e),u.getNumberFeaturesOGCAPIFeaturesLayer(d).then(function(e){var t,i;1===e?(t=v("results_1_singular"),i=v("results_2_singular")):(t=v("results_1_plural"),i=v("results_2_plural"));var r=document.querySelector("#m-layerswitcher-ogc-check-results");r.style.display="block",r.innerHTML="".concat(t).concat(e).concat(i)}).then(function(){document.querySelector("#m-layerswitcher-ogc-check-results").focus()}))}),m.addEventListener("click",function(){var d,h=document.querySelector(".m-content").innerHTML;p=document.querySelector("#m-layerswitcher-ogc-vectors-select").value;var y=document.querySelector("#m-layerswitcher-ogc-limit-items").value,m=document.querySelector("#m-layerswitcher-ogc-search-bbox").checked,f="".concat(t,"/collections/").concat(p,"/queryables");IDEE.remote.get(f).then(function(t){try{var f=JSON.parse(t.text).properties;(d=Object.values(f)).forEach(function(t){if(void 0!==t.title){var i=t.type.toLowerCase();"bool"===i||"boolean"===i?t.bool=!0:"timestamp"===i||"date"===i?t.date=!0:"int4"===i||"int"===i||"number"===i||"numeric"===i||i.includes("numeric")?t.number=!0:t.text=!0}void 0!==e&&(t.title in e&&(t.value=e[t.title]),document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML="")})}catch(e){}var g=document.querySelector(Ri).value,b=IDEE.template.compileSync(j(),{jsonp:!0,parseToHtml:!1,vars:{filtersList:d,summary:e,translations:{other_filters:v("other_filters"),id_filter:v("id_filter"),filters:v("filters"),custom_query_warning:v("custom_query_warning")}}}),w="".concat(v("custom_query_btn"));IDEE.dialog.remove(N(),void 0,u.order),IDEE.dialog.info(b,w,u.order);var E=document.createElement("button"),_=document.createElement("button");setTimeout(function(){document.querySelector("div.m-api-idee-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=v("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.style.display="none";var t=document.querySelector("div.m-dialog.info div.m-button");_.textContent=v("close"),_.style.width="75px",_.style.backgroundColor="#71a7d3",_.style.marginLeft="4px",_.setAttribute("data-link",g),_.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(_,t.firstChild),E.textContent=v("apply_btn"),E.style.width="75px",E.style.backgroundColor="#71a7d3",E.setAttribute("data-link",g),E.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(E,t.firstChild)},10),E.addEventListener("click",function(){var e=!1,t=!1;i.checked?(e=!0,t=!1,c=document.querySelectorAll("#m-layerswitcher-ogc-search-form-id input")):r.checked&&(e=!1,t=!0,c=document.querySelectorAll("#m-layerswitcher-ogc-search-formothers input"));var s=u.getFiltersDict(c);document.querySelector(".m-content").innerHTML=h,l=a.findIndex(function(e){return e.id===p}),IDEE.utils.isNullOrEmpty(s)||0===Object.keys(s).length?u.printOGCModal(n,l,y,m):u.printOGCModal(n,l,y,m,s,e,t)}),_.addEventListener("click",function(){document.querySelector(".m-content").innerHTML=h,l=a.findIndex(function(e){return e.id===p}),u.printOGCModal(n,l,y,m,e,s,o)})}).catch(function(e){IDEE.dialog.error(v("no_results"),void 0,u.order)})})}},{key:"getProperties",value:function(e,t){var i=document.querySelector(Ri).value,r=document.querySelector("#m-layerswitcher-ogc-vectors-select").selectedOptions[0].text;e=document.querySelector("#m-layerswitcher-ogc-vectors-select").value;var a,n=document.querySelector("#m-layerswitcher-ogc-limit-items").value,s=document.querySelector("#m-layerswitcher-ogc-search-bbox").checked,o=n;if(s){var l=this.map_.getBbox(),c=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[l.x.min,l.y.min]),d=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[l.x.max,l.y.max]);a="".concat(c[0],";").concat(c[1],";").concat(d[0],";").concat(d[1])}var u={};return u.url="".concat(i,"/collections/"),u.name=e,u.legend=r,u.limit=o,u.extract=!0,this.useAttributions_&&(u.attribution={url:"https://www.idee.es/",id:window.crypto.randomUUID(),name:u.legend,nameLayer:u.name}),s&&(u.bbox=a),!0===document.querySelector("#m-layerswitcher-ogc-filter-id-input").checked?u.id=document.querySelector("#m-layerswitcher-ogc-search-form-ID").value:void 0!==t&&(u.conditional=t),u.format="json",u}},{key:"getFiltersDict",value:function(e){var t={},i={};e.forEach(function(e){var r=e.id.substring(e.id.indexOf("form-")+5);switch(e.type){case"checkbox":i[r]||(i[r]=[]),i[r].push(e);break;case"date":if(!IDEE.utils.isNullOrEmpty(e.value)){var a=new Date(e.value);t[r]=a.toISOString().split("T")[0]}break;default:IDEE.utils.isNullOrEmpty(e.value)||(t[r]=e.value)}}),Object.keys(i).forEach(function(e){var r=i[e].filter(function(e){return e.checked}).map(function(e){return e.value});1===r.length&&(t[e]=r[0])});var r=Object.keys(t),a=Object.values(t),n={};return r.forEach(function(e,t){n[e]=a[t]}),n}},{key:"getNumberFeaturesOGCAPIFeaturesLayer",value:function(e){var t,i=new IDEE.layer.OGCAPIFeatures(e),r=this.getFeatureUrl(i);return IDEE.remote.get(r).then(function(e){return null!==(t=JSON.parse(e.text))?"Feature"===t.type?1:t.features.length:0})}},{key:"destroy",value:function(){this.getImpl().destroy()}},{key:"getFeatureUrl",value:function(e){var t,i={};if(IDEE.utils.isNullOrEmpty(e.name)||(e.url="".concat(e.url).concat(e.name,"/items")),IDEE.utils.isNullOrEmpty(e.format)||(i.f=e.format),IDEE.utils.isNullOrEmpty(e.id)){if(e.url="".concat(e.url,"?"),IDEE.utils.isNullOrEmpty(e.limit)||(i.limit=e.limit),IDEE.utils.isNullOrEmpty(e.offset)||(i.offset=e.offset),IDEE.utils.isNullOrEmpty(e.bbox)||(i.bbox=e.bbox),t=IDEE.utils.addParameters(IDEE.utils.addParameters(e.url,i),e.getFeatureVendor),!IDEE.utils.isNullOrEmpty(e.conditional)){var r="";Object.keys(e.conditional).forEach(function(t){var i="&".concat(t,"=").concat(e.conditional[t],"&");r+=i}),i.conditional=r,t+=i.conditional}}else e.url="".concat(e.url).concat(e.id,"?"),t=IDEE.utils.addParameters(IDEE.utils.addParameters(e.url,i),e.getFeatureVendor);return t=t.replaceAll(" ","%20")}},{key:"addEventCODSI",value:function(){var e=this;this.codsiButton=document.querySelector(Fi),this.codsiFilterButton=document.querySelector("#m-layerswitcher-addservices-codsi-filter-btn"),this.codsiSearchInput=document.querySelector("#m-layerswitcher-addservices-codsi-search-input"),this.codsiCleanButton=document.querySelector("#m-layerswitcher-addservices-codsi-clean-btn"),null!==this.codsiButton&&(this.codsiButton.addEventListener("click",function(t){return e.showCODSI(t)}),this.codsiButton.addEventListener("keydown",function(t){return 13===t.keyCode&&e.showCODSI(t)}),this.codsiFilterButton.addEventListener("click",function(t){e.loadCODSIResults(e.select_codsi)}),this.codsiFilterButton.addEventListener("keydown",function(t){return 13===t.keyCode&&e.loadCODSIResults(e.select_codsi)}),this.codsiSearchInput.addEventListener("keypress",function(t){13===t.keyCode&&e.loadCODSIResults(e.select_codsi)}),this.codsiCleanButton.addEventListener("click",function(t){e.codsiSearchInput.value="",e.loadCODSIResults(e.select_codsi)}))}},{key:"loadCODSIResults",value:function(e){var t=this,i=this.generateUrlCODSI(e);IDEE.remote.get(i).then(function(i){var r=JSON.parse(i.text),a=r.summary["@count"],n=t.getResultCODSI(r);t.renderCODSIResults(n),t.renderCODSIPagination(e,a)}).catch(function(e){IDEE.dialog.error(v("exception.codsi"),void 0,t.order)})}},{key:"getResultCODSI",value:function(e){var t=this,i=[];return void 0!==e.metadata&&e.metadata.forEach(function(e){var r=t.getLinksCODSIResults(e);r.length>0&&i.push({title:e.title||e.defaultTitle,url:r[0].split("?")[0]})}),i}},{key:"generateUrlCODSI",value:function(e){var t=this.codsiSearchInput.value.trim(),i=1+9*(e-1),r=9*e,a="https://www.idee.es/csw-inspire-idee/srv/spa/q?_content_type=json&bucket=s101&facet.q=type%2Fservice&fast=index&from=*1&keyword=WMS%20or%20Web%20Map%20Service%20or%20WMTS%20or%20Web%20Map%20Tile%20Service%20or%20TMS%20or%20MVT%20or%20Features%20WFS&resultType=details&sortBy=title&sortOrder=asc&to=*2".split("*1").join("".concat(i)).split("*2").join("".concat(r));return""!==t&&(a+="&any=".concat(encodeURIComponent(t))),a}},{key:"getLinksCODSIResults",value:function(e){var t=this,i=[];return Array.isArray(e.link)?e.link.forEach(function(e){i=i.concat(t.formatLinksCODSIResults(e))}):i=i.concat(this.formatLinksCODSIResults(e.link)),i}},{key:"formatLinksCODSIResults",value:function(e){var t=[];return e.indexOf("||")>-1?t=e.split("||").filter(function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1}):e.indexOf("|")>-1&&(t=e.split("|").filter(function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1})),t}},{key:"renderCODSIResults",value:function(e){var t=this;this.codsiResults=document.querySelector("#m-layerswitcher-addservices-codsi-results"),this.codsiResults.innerHTML="",e.length>0?e.map(function(e){return t.createElementCODSIResults(e)}).forEach(function(e){return t.codsiResults.appendChild(e)}):this.codsiResults.innerHTML='<div class="codsi-no-results">'.concat(v("exception.codsi_no_results"),"</div>")}},{key:"createElementCODSIResults",value:function(e){var t=this,i=e.url,r=e.title,a=document.createElement("tr"),n=document.createElement("td"),s=document.createElement("span");return s.setAttribute("tabindex","0"),s.setAttribute("class","m-layerswitcher-codsi-result"),s.setAttribute("data-link",i),s.innerHTML=r,s.addEventListener("click",function(e){document.querySelector(Ri).value=i,t.filterName=void 0,t.readCapabilities(e)}),n.appendChild(s),a.appendChild(n),a}},{key:"paginationCODSI",value:function(){var e=this,t=document.querySelector("#m-layerswitcher-addservices-codsi-pagination"),i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("m-layerswitcher-addservices-pagination-btn"),i.id="nextCODSI",i.innerHTML="...",i.addEventListener("click",function(i){Yi.forEach(function(e,t){Yi[t]=e+Yi.length}),e.showButtonPaginationCODSI(t,Yi)});var r=document.createElement("button");r.setAttribute("type","button"),r.id="backCODSI",r.classList.add("m-layerswitcher-addservices-pagination-btn"),r.innerHTML="...",r.addEventListener("click",function(i){Yi.forEach(function(e,t){Yi[t]=e-Yi.length}),e.showButtonPaginationCODSI(t,Yi)}),t.insertBefore(r,t.firstChild),t.appendChild(i),this.showButtonPaginationCODSI(t,Yi)}},{key:"showButtonPaginationCODSI",value:function(e,t){var i=this,r=e.querySelectorAll("button");r.forEach(function(e,a){t.indexOf(a)>-1?r[a].style.display="inline-block":"nextCODSI"!==e.id&&"backCODSI"!==e.id&&(r[a].style.display="none"),a===i.select_codsi?r[a].setAttribute("disabled","disabled"):r[a].removeAttribute("disabled")}),t.indexOf(1)>-1?document.querySelector("#backCODSI").style.display="none":document.querySelector("#backCODSI").style.display="inline-block",t.indexOf(r.length-1)>-1?document.querySelector("#nextCODSI").style.display="none":document.querySelector("#nextCODSI").style.display="inline-block"}},{key:"renderCODSIPagination",value:function(e,t){var i=this;if(document.querySelector("#m-layerswitcher-addservices-codsi-pagination").innerHTML="",t>0){for(var r=Math.ceil(t/9),a="",n=1;n<=r;n+=1)a+=n===e?'<button type="button" tabindex="0" class="m-layerswitcher-addservices-pagination-btn" disabled>'.concat(n,"</button>"):'<button type="button" tabindex="0" class="m-layerswitcher-addservices-pagination-btn">'.concat(n,"</button>");document.querySelector("#m-layerswitcher-addservices-codsi-pagination").innerHTML=a,document.querySelectorAll("#m-layerswitcher-addservices-codsi-pagination button").forEach(function(e,t){e.addEventListener("click",function(){i.select_codsi=t+1,i.loadCODSIResults(t+1)})})}this.paginationCODSI()}},{key:"showCODSI",value:function(){document.querySelector(Hi).innerHTML="",document.querySelector(Wi).innerHTML="",document.querySelector(zi).style.display="block",document.querySelector(Ui).style.display="none",null!==document.querySelector("#m-layerswitcher-ogcCContainer")&&(document.querySelector("#m-layerswitcher-ogcCContainer").style.display="none"),this.loadCODSIResults(this.select_codsi)}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach(function(e){return e.setAttribute("tabindex",t.order)})}},{key:"equals",value:function(t){return t instanceof e}}],i&&Ci(t.prototype,i),r&&Ci(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r,a,n}();const Xi=JSON.parse('{"Pu":{"name":"layerswitcher","description":"Extensión que permite listar y gestionar los servicios añadidos en el mapa. Además permite añadir servicios de forma fácil y rápida.","version":"3.0.0","date":"2023-09-14","author":"Guadaltel","org":"CNIG","tags":"plugin"}}');var Zi=i(431),Ji=i.n(Zi);function Ki(e){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(e)}function $i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}function er(e){var t=function(e,t){if("object"!=Ki(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=Ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ki(t)?t:t+""}function tr(e,t,i){return t=rr(t),function(e,t){if(t&&("object"==Ki(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ir()?Reflect.construct(t,i||[],rr(e).constructor):t.apply(e,i))}function ir(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ir=function(){return!!e})()}function rr(e){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rr(e)}function ar(e,t){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ar(e,t)}var nr={groups:[{name:"Cartografía",services:[{name:"Mapas",type:"WMTS",url:"https://www.ign.es/wmts/mapa-raster?"},{name:"Callejero ",type:"WMTS",url:"https://www.ign.es/wmts/ign-base?"},{name:"Primera edición MTN y Minutas de 1910-1970",type:"WMTS",url:"https://www.ign.es/wmts/primera-edicion-mtn?"},{name:"Planimetrías (1870 y 1950)",type:"WMS",url:"https://www.ign.es/wms/minutas-cartograficas?"},{name:"Planos de Madrid (1622 - 1960)",type:"WMTS",url:"https://www.ign.es/wmts/planos?"},{name:"Hojas kilométricas (Madrid - 1860)",type:"WMS",url:"https://www.ign.es/wms/hojas-kilometricas?"},{name:"Cuadrículas Mapa Topográfico Nacional",type:"WMS",url:"https://www.ign.es/wms-inspire/cuadriculas?"}]},{name:"Imágenes",services:[{name:"Ortofotos máxima actualidad PNOA",type:"WMTS",url:"https://www.ign.es/wmts/pnoa-ma?"},{name:"Ortofotos históricas y PNOA anual",type:"WMS",url:"https://www.ign.es/wms/pnoa-historico?"},{name:"Ortofotos provisionales PNOA",type:"WMS",url:"https://wms-pnoa.idee.es/pnoa-provisionales?"},{name:"Mosaicos de satélite",type:"WMS",url:"https://wms-satelites-historicos.idee.es/satelites-historicos?"},{name:"Fototeca (Consulta de fotogramas históricos y PNOA)",type:"WMS",url:"https://wms-fototeca.idee.es/fototeca?"}]},{name:"Información geográfica de referencia y temática",services:[{name:"Catastro ",type:"WMS",url:"https://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?"},{name:"Unidades administrativas",type:"WMS",url:" https://www.ign.es/wms-inspire/unidades-administrativas?"},{name:"Nombres geográficos (Nomenclátor Geográfico Básico NGBE)",type:"WMS",url:"https://www.ign.es/wms-inspire/ngbe?"},{name:"Redes de transporte",type:"WMS",url:"https://servicios.idee.es/wms-inspire/transportes?"},{name:"Hidrografía ",type:"WMS",url:"https://servicios.idee.es/wms-inspire/hidrografia?"},{name:"Direcciones y códigos postales",type:"WMS",url:"https://www.cartociudad.es/wms-inspire/direcciones-ccpp?"},{name:"Ocupación del suelo (Corine y SIOSE)",type:"WMTS",url:"https://servicios.idee.es/wmts/ocupacion-suelo?"},{name:"Ocupación del suelo Histórico (Corine y SIOSE)",type:"WMS",url:"https://servicios.idee.es/wms-inspire/ocupacion-suelo-historico?"},{name:"Copernicus Land Monitoring Service",type:"WMS",url:"https://servicios.idee.es/wms/copernicus-landservice-spain?"},{name:"Información sísmica (terremotos)",type:"WMS",url:"https://www.ign.es/wms-inspire/geofisica?"},{name:"Red de vigilancia volcánica",type:"WMS",url:"https://wms-volcanologia.ign.es/volcanologia?"},{name:"Redes geodésicas",type:"WMS",url:"https://www.ign.es/wms-inspire/redes-geodesicas?"}]},{name:"Modelos digitales de elevaciones",services:[{name:"Modelo Digital de Superficies (Sombreado superficies y consulta de elevaciones edificios y vegetación)",type:"WMTS",url:"https://wmts-mapa-lidar.idee.es/lidar?"},{name:"Modelo Digital del Terreno (Sombreado terreno y consulta de altitudes)",type:"WMTS",url:"https://servicios.idee.es/wmts/mdt?",white_list:["EL.ElevationGridCoverage"]},{name:"Curvas de nivel y puntos acotados",type:"WMS",url:"https://servicios.idee.es/wms-inspire/mdt?",white_list:["EL.ContourLine","EL.SpotElevation"]}]}]},sr=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=tr(this,e)).map_=null,t.controls_=[],t.name_="layerswitcher",t.options=i,t.position_=i.position||"TR",t.collapsed_=!!IDEE.utils.isUndefined(i.collapsed)||i.collapsed,t.collapsible_=!!IDEE.utils.isUndefined(i.collapsible)||i.collapsible,t.tooltip_=i.tooltip||v("tooltip"),t.isDraggable=!IDEE.utils.isUndefined(i.isDraggable)&&i.isDraggable,t.isMoveLayers=i.isMoveLayers||!1,t.modeSelectLayers=IDEE.utils.isUndefined(i.modeSelectLayers)?"eyes":i.modeSelectLayers,t.tools=IDEE.utils.isUndefined(i.tools)?["transparency","legend","zoom","information","style","delete"]:i.tools,t.addLayers=i.addLayers,t.statusLayers=i.statusLayers,t.precharged=i.precharged||nr,t.displayLabel=!IDEE.utils.isUndefined(i.displayLabel)&&i.displayLabel,t.metadata_=Xi.Pu,t.http=!0,void 0===i.http||!1!==i.http&&"false"!==i.http||(t.http=!1),t.https=!0,void 0===i.https||!1!==i.https&&"false"!==i.https||(t.https=!1),t.showCatalog=i.showCatalog||!1,t.useProxy=!IDEE.utils.isUndefined(i.useProxy)&&i.useProxy,t.statusProxy=IDEE.useproxy,t.order=i.order>=-1?i.order:null,t.useAttributions=i.useAttributions||!1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ar(e,t)}(e,IDEE.Plugin),t=e,r=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?y:m:IDEE.language.getTranslation(e).layerswitcher}}],(i=[{key:"addTo",value:function(e){var t=this;this.map_=e;var i=new IDEE.ui.Panel("Layerswitcher",{className:"m-plugin-layerswitcher",collapsed:this.collapsed_,collapsible:this.collapsible_,position:IDEE.ui.position[this.position_],collapsedButtonClass:"m-layerswitcher-icons-layers",tooltip:this.tooltip_,order:this.order});this.panel_=i;var r=new Qi({isDraggable:this.isDraggable,modeSelectLayers:this.modeSelectLayers,tools:this.tools,addLayers:this.addLayers,statusLayers:this.statusLayers,collapsed:this.collapsed_,isMoveLayers:this.isMoveLayers,precharged:this.precharged,http:this.http,https:this.https,showCatalog:this.showCatalog,order:this.order,useProxy:this.useProxy,statusProxy:this.statusProxy,useAttributions:this.useAttributions,displayLabel:this.displayLabel});this.control_=r,this.controls_.push(this.control_),this.control_.on(IDEE.evt.ADDED_TO_MAP,function(){t.fire(IDEE.evt.ADDED_TO_MAP)}),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_),r.addEventPanel(i)}},{key:"position",get:function(){return this.position_}},{key:"name",get:function(){return this.name_}},{key:"collapsed",get:function(){return this.panel_.isCollapsed()}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.tooltip_,"*").concat(this.isDraggable,"*").concat(this.isMoveLayers,"*").concat(this.modeSelectLayers,"*").concat(this.tools,"*").concat(this.http,"*").concat(this.https,"*").concat(this.showCatalog,"*").concat(this.useProxy,"*").concat(this.displayLabel,"*").concat(this.addLayers,"*").concat(this.statusLayers)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(IDEE.utils.encodeBase64(this.options))}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.control_=null}},{key:"equals",value:function(t){return t instanceof e}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise(function(e){e(IDEE.template.compileSync(Ji(),{vars:{urlImages:"".concat(IDEE.config.API_IDEE_URL,"plugins/layerswitcher/images/"),translations:{help1:v("textHelp.help1"),help2:v("textHelp.help2"),help3:v("textHelp.help3"),help4:v("textHelp.help4"),help5:v("textHelp.help5"),help6:v("textHelp.help6"),help7:v("textHelp.help7"),help8:v("textHelp.help8"),help9:v("textHelp.help9"),help10:v("textHelp.help10"),help11:v("textHelp.help11"),help12:v("textHelp.help12"),help13:v("textHelp.help13"),help14:v("textHelp.help14"),help15:v("textHelp.help15"),help16:v("textHelp.help16"),help17:v("textHelp.help17"),help18:v("textHelp.help18"),help19:v("textHelp.help19"),help20:v("textHelp.help20")}}}))})}}}])&&$i(t.prototype,i),r&&$i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r}();window.IDEE.plugin||(window.IDEE.plugin={}),window.IDEE.control||(window.IDEE.control={}),window.IDEE.plugin.Layerswitcher=sr,window.IDEE.control.LayerswitcherControl=Qi})()})();
//# sourceMappingURL=layerswitcher.ol.min.js.map